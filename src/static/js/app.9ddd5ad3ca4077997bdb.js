webpackJsonp([2],{"+N06":function(e,t){},"/dbA":function(e,t){},"0y83":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Xxa5"),s=n.n(a),r=n("exGp"),i=n.n(r),o=n("Dd8w"),u=n.n(o),l=n("NYxO"),c=n("VsUZ"),d={name:"page-logout",computed:u()({},Object(l.b)("user",["session"])),methods:{handleClick:function(){var e=this;return i()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.user.logout();case 2:e.$message.success("登出成功"),e.$router.push("/login");case 4:case"end":return t.stop()}},t,e)}))()}}},m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-section-container",{key:"logout"},[n("ui-section",{attrs:{title:"登出用户",width:"300px"}},[n("ui-section-content",[n("p",[e._v("当前用户："+e._s(e.session.username))]),e._v(" "),n("p",[e._v("当前权限："+e._s(e.session.role))])]),e._v(" "),n("ui-section-content",[n("el-button",{attrs:{type:"primary"},on:{click:e.handleClick}},[e._v("点击此处登出")])],1)],1)],1)},p=[],f={render:m,staticRenderFns:p},v=f,g=n("VU/8"),b=g(d,v,null,null,null);t.default=b.exports},"1fBL":function(e,t){},"3E4E":function(e,t){},"3Jnv":function(e,t){},"3ay9":function(e,t){},"5Mqk":function(e,t){},"5TrB":function(e,t){},"5woi":function(e,t){},"8iz5":function(e,t){},"9FHG":function(e,t,n){"use strict";function a(e){n("+N06"),n("iIC1")}Object.defineProperty(t,"__esModule",{value:!0});var s=n("Xxa5"),r=n.n(s),i=n("exGp"),o=n.n(i),u=n("I2P0"),l=n.n(u),c=n("ctUf"),d=n.n(c),m=n("VsUZ"),p={name:"page-assignment-problem-detail",data:function(){return{data:{text:"加载中",questions:[],read_only:!0},answers:{},loading:!1,changed:!1,submitting:!1,lastSubmitAt:null,autoSaveTimer:null}},created:function(){this.initData()},watch:{$route:"initData",changed:function(e){e?this.deferAutoSave():this.cancelAutoSave()}},beforeRouteUpdate:function(e,t,n){this.handleLeave(n)},beforeRouteLeave:function(e,t,n){this.handleLeave(n)},methods:{initData:function(){var e=this;return o()(r.a.mark(function t(){var n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,m.a.assignment.problem.detail(e.$route.params.aid,e.$route.params.pid);case 4:n=t.sent.data,e.data=n,n.submission&&(e.answers=d()(n.submission.answers.map(function(e){return[e.question_id,e.text]})),e.lastSubmitAt=n.submission.updated_at);case 7:return t.prev=7,e.loading=!1,t.finish(7);case 10:case"end":return t.stop()}},t,e,[[1,,7,10]])}))()},handleSaveClick:function(e){var t=this;return o()(r.a.mark(function n(){var a,s;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.submitting){n.next=2;break}return n.abrupt("return");case 2:return t.submitting=!0,a=l()(t.answers).map(function(e){return{question_id:e[0],text:e[1]}}),n.prev=4,n.next=7,m.a.assignment.problem.submit(t.$route.params.aid,t.$route.params.pid,a);case 7:s=n.sent.data,t.$store.dispatch("assignment/updateSubmission",s),t.changed=!1,t.lastSubmitAt=Date.now(),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(4),t.$notify.error({title:"保存答案失败",message:"未能"+(e?"自动":"")+"保存此答案，错误信息："+n.t0.message});case 16:return n.prev=16,t.submitting=!1,n.finish(16);case 19:case"end":return n.stop()}},n,t,[[4,13,16,19]])}))()},handleInput:function(){var e=this;return o()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.changed=!0;case 1:case"end":return t.stop()}},t,e)}))()},deferAutoSave:function(){var e=this;this.autoSaveTimer||(window.onbeforeunload=function(){return"您还有未保存的答案，关闭后将丢失，仍然要继续关闭吗？"},this.autoSaveTimer=setInterval(function(){return e.handleSaveClick(!0)},6e4))},cancelAutoSave:function(){window.onbeforeunload=void 0,this.autoSaveTimer&&clearInterval(this.autoSaveTimer),this.autoSaveTimer=null},handleLeave:function(e){this.changed&&!confirm("您还有未保存的答案，关闭后将丢失，仍然要继续关闭吗？")||(this.cancelAutoSave(),e())}}},f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-section-container",{directives:[{name:"loading",rawName:"v-loading.body",value:e.loading,expression:"loading",modifiers:{body:!0}}],key:e.$route.params.pid},[n("ui-section",{staticClass:"problem_container",attrs:{title:"题目详情",width:"500px"}},[n("div",{staticClass:"problem_content"},[n("ui-section-content",[n("ui-markdown",{attrs:{markdown:e.data.text}}),e._v(" "),e._l(e.data.questions,function(t,a){return n("div",{key:t._id,staticClass:"question_item"},[n("hr"),e._v(" "),n("div",[e._v("Q"+e._s(a+1)+":")]),e._v(" "),n("ui-markdown",{attrs:{markdown:t.text}}),e._v(" "),n("el-input",{staticClass:"ui-mono",attrs:{type:"textarea",spellcheck:"false",disabled:e.data.read_only,autosize:{minRows:2,maxRows:7}},on:{input:e.handleInput},model:{value:e.answers[t._id],callback:function(n){e.$set(e.answers,t._id,n)},expression:"answers[qdoc._id]"}})],1)})],2)],1),e._v(" "),n("div",{staticClass:"problem_toolbar"},[n("el-button",{attrs:{loading:e.submitting,disabled:!e.changed||e.data.read_only,type:"primary"},on:{click:function(t){e.handleSaveClick(!1)}}},[e._v("保存")]),e._v(" "),e.lastSubmitAt?n("span",{staticClass:"problem_toolbar_item"},[e._v("最后保存于 "+e._s(e._f("moment")(e.lastSubmitAt,"YYYY-MM-DD HH:mm:ss")))]):e._e(),e._v(" "),e.data.read_only?e._e():n("span",{staticClass:"problem_toolbar_item"},[e._v("每分钟自动保存")])],1)])],1)},v=[],g={render:f,staticRenderFns:v},b=g,_=n("VU/8"),h=a,w=_(p,b,h,"data-v-1a67368e",null);t.default=w.exports},Fv7D:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Xxa5"),s=n.n(a),r=n("exGp"),i=n.n(r),o=n("VsUZ"),u={name:"page-change-password",data:function(){return{data:{password:"",passwordRepeat:""},rules:{password:[{required:!0,message:"请输入新密码",trigger:"blur"}],passwordRepeat:[{required:!0,message:"请重复输入密码",trigger:"blur"}]}}},methods:{handleSubmit:function(){var e=this;this.$refs.form.validate(function(){var t=i()(s.a.mark(function t(n){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return",!1);case 2:if(e.data.password===e.data.passwordRepeat){t.next=5;break}return e.$alert("您两次输入的密码不一致","修改密码失败",{type:"error"}),t.abrupt("return");case 5:return t.next=7,o.a.user.changePassword(e.data);case 7:e.$message.success("修改密码成功"),e.$router.push({name:"Dashboard"});case 9:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}())},handleCancel:function(){this.$router.go(-1)}}},l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-section-container",{key:"change_password"},[n("ui-section",{attrs:{title:"修改密码",width:"300px"}},[e.$route.query&&e.$route.query.initial?n("ui-section-content",[n("el-alert",{attrs:{title:"您是第一次登录，必须修改密码后才能继续操作",type:"info","show-icon":""}})],1):e._e(),e._v(" "),n("ui-section-content",[n("el-form",{ref:"form",attrs:{rules:e.rules,model:e.data,"label-position":"top"},nativeOn:{submit:function(t){t.preventDefault(),e.handleSubmit(t)}}},[n("el-form-item",{attrs:{label:"新密码",prop:"password"}},[n("el-input",{attrs:{type:"password"},model:{value:e.data.password,callback:function(t){e.data.password=t},expression:"data.password"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"重复密码",prop:"passwordRepeat"}},[n("el-input",{attrs:{type:"password"},model:{value:e.data.passwordRepeat,callback:function(t){e.data.passwordRepeat=t},expression:"data.passwordRepeat"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary",nativeType:"submit"}},[e._v("保存")]),e._v(" "),n("el-button",{on:{click:e.handleCancel}},[e._v("取消")])],1)],1)],1)],1)],1)},c=[],d={render:l,staticRenderFns:c},m=d,p=n("VU/8"),f=p(u,m,null,null,null);t.default=f.exports},HB7i:function(e,t){},IWpZ:function(e,t){},L28S:function(e,t){},NHnr:function(e,t,n){"use strict";function a(e){return he()(e)}function s(e){n("3Jnv")}function r(e){n("q+hc")}Object.defineProperty(t,"__esModule",{value:!0});var i=(n("L28S"),n("2X9z")),o=n.n(i),u=(n("Pg03"),n("yg6k")),l=n.n(u),c=(n("Np66"),n("+TD8")),d=n.n(c),m=(n("sh7P"),n("nu7/")),p=n.n(m),f=(n("z/ip"),n("LQMI")),v=n.n(f),g=(n("mdtY"),n("91Nw")),b=n.n(g),_=(n("8iz5"),n("ajQY")),h=n.n(_),w=(n("pkzQ"),n("D3wm")),x=n.n(w),y=(n("5woi"),n("orbS")),k=n.n(y),S=(n("Oxd1"),n("Mezo")),$=n.n(S),D=(n("qKch"),n("vqwl")),M=n.n(D),C=(n("lJ88"),n("tLa+")),P=n.n(C),R=(n("HB7i"),n("mtrD")),A=n.n(R),Y=(n("voBo"),n("wxbk")),q=n.n(Y),j=(n("5TrB"),n("HJMx")),F=n.n(j),U=(n("3E4E"),n("ACGT")),E=n.n(U),O=(n("1fBL"),n("exT9")),V=n.n(O),H=(n("5Mqk"),n("SExR")),L=n.n(H),T=(n("3ay9"),n("psK2"),n("qubY")),z=n.n(T),N=n("7+uW"),I=n("mjDs"),G=n.n(I),Z=(n("IWpZ"),{name:"ui-section",props:{title:{type:String,required:!0},width:{type:String,default:"100%"}}}),B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"section",style:{width:this.width}},[n("div",{staticClass:"section_inner"},[n("div",{staticClass:"section_title"},[e._v(e._s(this.title))]),e._v(" "),n("div",{staticClass:"section_body"},[e._t("default")],2)])])},X=[],J={render:B,staticRenderFns:X},Q=J,K=n("VU/8"),W=K(Z,Q,null,null,null),ee=W.exports,te={name:"ui-section-container"},ne=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"section-container"},[e._t("default")],2)},ae=[],se={render:ne,staticRenderFns:ae},re=se,ie=n("VU/8"),oe=ie(te,re,null,null,null),ue=oe.exports,le={name:"ui-section-content",props:{extend:{type:Boolean,default:!1}}},ce=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{class:["section_content",{extended:this.extend}]},[e._t("default")],2)},de=[],me={render:ce,staticRenderFns:de},pe=me,fe=n("VU/8"),ve=fe(le,pe,null,null,null),ge=ve.exports,be={install:function(e){e.component(ee.name,ee),e.component(ue.name,ue),e.component(ge.name,ge)}},_e=n("EFqf"),he=n.n(_e),we=n("70Rd"),xe=n.n(we);n("T9F5");xe.a.registerLanguage("cpp",n("fay8"));var ye=new he.a.Renderer;ye.link=function(e,t,n){var a;return a='<a href="'+e+'"',a+=' target="_blank"',t&&(a+=' title="'+t+'"'),a+=">"+n+"</a>"},he.a.setOptions({highlight:function(e,t){return xe.a.highlight(t,e).value},sanitize:!0,renderer:ye});var ke=(n("xPwM"),{name:"ui-markdown",computed:{compiledMarkdown:function(){return a(this.markdown)}},props:{markdown:{type:String,default:""}}}),Se=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"markdown-content typo",domProps:{innerHTML:e._s(e.compiledMarkdown)}})},$e=[],De={render:Se,staticRenderFns:$e},Me=De,Ce=n("VU/8"),Pe=s,Re=Ce(ke,Me,Pe,null,null),Ae=Re.exports,Ye={install:function(e){e.component(Ae.name,Ae)}},qe={name:"app"},je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"transition-page",mode:"out-in"}},[n("router-view")],1)},Fe=[],Ue={render:je,staticRenderFns:Fe},Ee=Ue,Oe=n("VU/8"),Ve=r,He=Oe(qe,Ee,Ve,null,null),Le=He.exports,Te=n("Xxa5"),ze=n.n(Te),Ne=n("exGp"),Ie=n.n(Ne),Ge=n("/ocq"),Ze=n("NYxO"),Be=n("VsUZ"),Xe={namespaced:!0,state:{session:null},mutations:{setSession:function(e,t){e.session=t},clearSession:function(e){e.session=null}},actions:{initSession:function(e){var t=this,n=e.commit;return Ie()(ze.a.mark(function e(){var a;return ze.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be.a.user.session();case 2:a=e.sent,n("setSession",a.data);case 4:case"end":return e.stop()}},e,t)}))()}}},Je=n("8wQP"),Qe=n.n(Je),Ke={namespaced:!0,state:{problems:{},submissions:{},submissionStates:{}},mutations:{setAssignment:function(e,t){e.problems=Qe()(t.problems,"_id"),e.submissions=Qe()(t.submissions,"problem_id"),e.submissionStates={}},setSubmission:function(e,t){e.submissions[t.problem_id]=t},updateSubmissionState:function(e){e.submissionStates={};for(var t in e.problems){var n=e.problems[t];if(0!==n.questions.length){var a=0,s=e.submissions[n._id];s&&function(){var e=Qe()(s.answers,"question_id");a=n.questions.reduce(function(t,n){var a=e[n._id],s=void 0;return s=a&&a.text&&a.text.trim().length>0?1:0,t+s},0)}(),e.submissionStates[t]=a/n.questions.length}else e.submissionStates[t]=1}}},actions:{setAssignment:function(e,t){var n=e.commit;n("setAssignment",t),n("updateSubmissionState")},updateSubmission:function(e,t){var n=e.commit;n("setSubmission",t),n("updateSubmissionState")}}};N.default.use(Ze.a);var We=new Ze.a.Store({modules:{user:Xe,assignment:Ke},strict:!1}),et=n("Y81h"),tt=n.n(et),nt=(n("UVIz"),function(){var e=Ie()(ze.a.mark(function e(t){return ze.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.meta.roles){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,We.dispatch("user/initSession");case 5:if(-1!==t.meta.roles.indexOf(We.state.user.session.role)){e.next=7;break}return e.abrupt("return","/error/forbidden");case 7:if(e.prev=7,!We.state.user.session.first||"/user/changePassword"===t.path||"/user/logout"===t.path){e.next=10;break}return e.abrupt("return","/user/changePassword?initial=true");case 10:e.next=14;break;case 12:e.prev=12,e.t0=e.catch(7);case 14:e.next=21;break;case 16:if(e.prev=16,e.t1=e.catch(2),401!==e.t1.response.status){e.next=20;break}return e.abrupt("return","/login");case 20:return e.abrupt("return",!1);case 21:case"end":return e.stop()}},e,this,[[2,16],[7,12]])}));return function(t){return e.apply(this,arguments)}}());N.default.use(Ge.a);var at=new Ge.a({routes:[{path:"/login",component:n("P7ry").default,meta:{title:"登录"}},{path:"/",component:n("cpAg").default,children:[{path:"/",component:n("s+3R").default,name:"Dashboard",meta:{title:"作业列表",roles:["admin","ta","student"]}},{path:"/assignment/:aid",component:n("SrvS").default,name:"AssignmentDetail",meta:{title:"作业详情",roles:["admin","ta","student"]},children:[{path:"/assignment/:aid/problem/:pid",component:n("9FHG").default,name:"AssignmentProblemDetail",meta:{title:"题目详情",roles:["admin","ta","student"]}}]},{path:"/manage/assignments",component:function(){return n.e(0).then(n.bind(null,"Lu0u"))},name:"ManageAssignmentAll",meta:{title:"所有作业",roles:["admin","ta"]}},{path:"/manage/assignments/:aid/submissions",component:function(){return n.e(0).then(n.bind(null,"ChDi"))},name:"ManageAssignmentSubmissions",meta:{title:"作业递交状态",roles:["admin","ta"]}},{path:"/manage/assignments/create",component:function(){return n.e(0).then(n.bind(null,"qpjQ"))},meta:{title:"创建作业",roles:["admin","ta"]}},{path:"/manage/assignments/:id",component:function(){return n.e(0).then(n.bind(null,"6vfL"))},name:"ManageAssignmentDetail",meta:{title:"作业信息",roles:["admin","ta"]},children:[{path:"/manage/assignments/:id/problem/create",component:function(){return n.e(0).then(n.bind(null,"nvEf"))},name:"ManageAssignmentDetailProblemCreate",meta:{roles:["admin","ta"]}},{path:"/manage/assignments/:id/problem/rearrange",component:function(){return n.e(0).then(n.bind(null,"p2Pw"))},name:"ManageAssignmentDetailProblemRearrange",meta:{roles:["admin","ta"]}},{path:"/manage/assignments/:id/problem/:pid",component:function(){return n.e(0).then(n.bind(null,"5Yjw"))},name:"ManageAssignmentDetailProblemDetail",meta:{roles:["admin","ta"]}}]},{path:"/manage/submissions/:id",component:function(){return n.e(0).then(n.bind(null,"wtHI"))},name:"ManageAssignmentSubmissionDetail",meta:{title:"递交详情",roles:["admin","ta"]}},{path:"/user/changePassword",component:n("Fv7D").default,meta:{title:"修改密码",roles:["admin","ta","student"]}},{path:"/user/logout",component:n("0y83").default,meta:{title:"登出",roles:["admin","ta","student"]}}]},{path:"/error/forbidden",component:n("Pua8").default,meta:{title:"Forbidden"}},{path:"*",component:n("lhgG").default,meta:{title:"Page Not Found"}}]});at.beforeResolve(function(e,t,n){e.meta.title&&(document.title=e.meta.title+" | TJLMS"),nt(e).catch(function(e){return console.error(e)}).then(function(e){return n(e)})}),at.beforeResolve(function(e,t,n){tt.a.start(),n()}),at.afterEach(function(){tt.a.done()});var st=at;n("tA/g");N.default.use(z.a),N.default.use(L.a),N.default.use(V.a),N.default.use(E.a),N.default.use(F.a),N.default.use(q.a),N.default.use(A.a),N.default.use(P.a),N.default.use(M.a),N.default.use($.a),N.default.use(k.a),N.default.use(x.a),N.default.use(h.a),N.default.use(b.a),N.default.use(v.a),N.default.use(p.a.directive),N.default.prototype.$loading=p.a.service,N.default.prototype.$msgbox=d.a,N.default.prototype.$alert=d.a.alert,N.default.prototype.$confirm=d.a.confirm,N.default.prototype.$prompt=d.a.prompt,N.default.prototype.$notify=l.a,N.default.prototype.$message=o.a,N.default.use(G.a),N.default.use(be),N.default.use(Ye),new N.default({el:"#app",router:st,store:We,render:function(e){return e(Le)}})},Np66:function(e,t){},Oxd1:function(e,t){},P7ry:function(e,t,n){"use strict";function a(e){n("/dbA")}Object.defineProperty(t,"__esModule",{value:!0});var s=n("Xxa5"),r=n.n(s),i=n("exGp"),o=n.n(i),u=n("VsUZ"),l={name:"page-login",data:function(){return{form:{username:"",password:""},formRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{handleSubmit:function(){var e=this;this.$refs.form.validate(function(){var t=o()(r.a.mark(function t(n){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,u.a.user.login(e.form);case 5:e.$router.replace({name:"Dashboard"}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),e.$message.error(t.t0.message);case 11:case"end":return t.stop()}},t,e,[[2,8]])}));return function(e){return t.apply(this,arguments)}}())}}},c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",{staticClass:"vcContainer",attrs:{type:"flex",justify:"center",align:"middle"}},[n("el-col",{attrs:{md:6}},[n("el-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("h1",[e._v("登录作业系统")])]),e._v(" "),n("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"80"},nativeOn:{submit:function(t){t.preventDefault(),e.handleSubmit(t)}}},[n("el-form-item",{attrs:{label:"用户名",prop:"username"}},[n("el-input",{model:{value:e.form.username,callback:function(t){e.form.username=t},expression:"form.username"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.form.password=t},expression:"form.password"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary",nativeType:"submit"}},[e._v("提交")])],1)],1)],1)],1)],1)},d=[],m={render:c,staticRenderFns:d},p=m,f=n("VU/8"),v=a,g=f(l,p,v,"data-v-7c56d3a8",null);t.default=g.exports},Pg03:function(e,t){},Pua8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={name:"page-error-forbidden"},s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",{staticClass:"vcContainer",attrs:{type:"flex",justify:"center",align:"middle"}},[n("div",[n("h1",[e._v("Forbidden")]),e._v(" "),n("p",[e._v("You don't have the permission to access this page.")])])])},r=[],i={render:s,staticRenderFns:r},o=i,u=n("VU/8"),l=u(a,o,null,null,null);t.default=l.exports},SYxA:function(e,t){},SrvS:function(e,t,n){"use strict";function a(e){n("SYxA")}Object.defineProperty(t,"__esModule",{value:!0});var s=n("Xxa5"),r=n.n(s),i=n("exGp"),o=n.n(i),u=n("Dd8w"),l=n.n(u),c=n("NYxO"),d=n("VsUZ"),m={name:"page-assignment-detail",data:function(){return{data:{name:"作业详情",problems:[]},loading:!1}},created:function(){this.initData()},watch:{$route:"initData"},computed:l()({},Object(c.b)("assignment",["submissionStates"])),methods:{initData:function(){var e=this;return o()(r.a.mark(function t(){var n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,d.a.assignment.detail(e.$route.params.aid);case 4:n=t.sent.data,e.$store.dispatch("assignment/setAssignment",n),e.data=n;case 7:return t.prev=7,e.loading=!1,t.finish(7);case 10:case"end":return t.stop()}},t,e,[[1,,7,10]])}))()}}},p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-section-container",{directives:[{name:"loading",rawName:"v-loading.body",value:e.loading,expression:"loading",modifiers:{body:!0}}],key:"assignment_detail"},[n("ui-section",{attrs:{title:e.data.name,width:"300px"}},[n("ui-section-content",[n("p",[e._v("开始时间："+e._s(e._f("moment")(e.data.begin_at,"YYYY-MM-DD HH:mm:ss")))]),e._v(" "),n("p",[e._v("结束时间："+e._s(e._f("moment")(e.data.end_at,"YYYY-MM-DD HH:mm:ss")))]),e._v(" "),n("p",[e._v("题量："+e._s(e.data.problems.length)+" 题")])]),e._v(" "),n("ui-section-content",{attrs:{extend:""}},[n("ul",e._l(e.data.problems,function(t,a){return n("li",{key:t._id,staticClass:"problem-list_item"},[n("router-link",{staticClass:"problem-list_link",attrs:{to:{name:"AssignmentProblemDetail",params:{aid:e.$route.params.aid,pid:t._id}}}},[n("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[n("el-col",{attrs:{span:12}},[e._v("\n                P"+e._s(a+1)+"\n              ")]),e._v(" "),n("el-col",{staticClass:"problem-list_link_tags",attrs:{span:12}},[0==e.submissionStates[t._id]?n("el-tag",{attrs:{type:"danger"}},[e._v("未回答")]):e._e(),e._v(" "),e.submissionStates[t._id]>0&&e.submissionStates[t._id]<1?n("el-tag",{attrs:{type:"warning"}},[e._v("部分回答")]):e._e(),e._v(" "),1==e.submissionStates[t._id]?n("el-tag",{attrs:{type:"success"}},[e._v("已回答")]):e._e()],1)],1)],1)],1)}))])],1),e._v(" "),n("transition",{attrs:{name:"transition-page",mode:"out-in"}},[n("router-view",{key:e.$route.path})],1)],1)},f=[],v={render:p,staticRenderFns:f},g=v,b=n("VU/8"),_=a,h=b(m,g,_,"data-v-5c617521",null);t.default=h.exports},T9F5:function(e,t){},UVIz:function(e,t){},VsUZ:function(e,t,n){"use strict";var a=n("L28S"),s=(n.n(a),n("psK2")),r=(n.n(s),n("2X9z")),i=n.n(r),o=n("//Fk"),u=n.n(o),l=n("mtWM"),c=n.n(l);c.a.interceptors.response.use(function(e){if(200===e.status){var t=e.data;if(e.status=t.code,e.data=t.data,200!==e.status){var n=new Error("Error: "+t.reason);return n.response=e,u.a.reject(n)}}return e}),c.a.interceptors.response.use(null,function(e){return i.a.error(e.message),u.a.reject(e)}),t.a={user:{session:function(){return c.a.get("/api/user/status")},login:function(e){var t=e.username,n=e.password;return c.a.post("/api/user/login",{username:t,password:n})},logout:function(){return c.a.get("/api/user/logout")},changePassword:function(e){var t=e.password;return c.a.post("/api/user/changePassword",{password:t})}},assignment:{all:function(){return c.a.get("/api/assignment")},detail:function(e){return c.a.get("/api/assignment/"+e)},problem:{detail:function(e,t){return c.a.get("/api/assignment/"+e+"/"+t)},submit:function(e,t,n){return c.a.post("/api/assignment/"+e+"/"+t,{answers:n})}}},manage:{assignment:{all:function(){return c.a.get("/api/manage/assignment")},create:function(e){var t=e.name,n=e.begin_at,a=e.end_at,s=e.visible;return c.a.post("/api/manage/create/assignment",{name:t,begin_at:n,end_at:a,visible:s})},update:function(e,t){var n=t.name,a=t.begin_at,s=t.end_at,r=t.visible;return c.a.post("/api/manage/update/assignment/"+e,{name:n,begin_at:a,end_at:s,visible:r})},detail:function(e){return c.a.get("/api/manage/assignment/"+e)},problem:{create:function(e,t){var n=t.order,a=t.visible,s=t.text,r=t.questions;return c.a.post("/api/manage/create/problem/"+e,{order:n,visible:a,text:s,questions:r})},update:function(e,t){var n=t.order,a=t.visible,s=t.text,r=t.questions;return c.a.post("/api/manage/update/problem/"+e,{questions:r,text:s,order:n,visible:a})},rearrange:function(e){var t=e.problems;return c.a.post("/api/manage/rearrange/problem",{problems:t})},delete:function(e){return c.a.post("/api/manage/delete/problem/"+e)}}},submission:{all:function(e){return c.a.get("/api/manage/assignment/"+e+"/submissions")},detail:function(e){return c.a.get("/api/manage/submission/"+e)}}}}},bR3z:function(e,t,n){e.exports=n.p+"static/img/404.23cf82b.jpg"},cpAg:function(e,t,n){"use strict";function a(e){n("j/do")}Object.defineProperty(t,"__esModule",{value:!0});var s=n("Dd8w"),r=n.n(s),i=n("NYxO"),o={name:"layout",computed:r()({},Object(i.b)("user",["session"])),methods:{handleSelect:function(e){this.$router.push(e)}}},u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vcContainer"},[n("div",{staticClass:"layoutLeft"},[n("el-menu",{staticClass:"leftMenu",attrs:{theme:"dark","default-active":e.$route.fullPath,"default-openeds":["problem_manage","answer_manage","user"],router:""}},[n("el-menu-item",{attrs:{index:"/"}},[e._v("作业列表")]),e._v(" "),["admin","ta"].indexOf(e.session.role)>-1?n("el-submenu",{attrs:{index:"problem_manage"}},[n("template",{attrs:{slot:"title"},slot:"title"},[e._v("作业管理")]),e._v(" "),n("el-menu-item",{attrs:{index:"/manage/assignments"}},[e._v("所有作业")]),e._v(" "),n("el-menu-item",{attrs:{index:"/manage/assignments/create"}},[e._v("创建作业")])],2):e._e(),e._v(" "),n("el-submenu",{attrs:{index:"user"}},[n("template",{attrs:{slot:"title"},slot:"title"},[e._v("用户 ("+e._s(e.session.username)+")")]),e._v(" "),n("el-menu-item",{attrs:{index:"/user/changePassword"}},[e._v("修改密码")]),e._v(" "),n("el-menu-item",{attrs:{index:"/user/logout"}},[e._v("登出")])],2)],1)],1),e._v(" "),n("div",{staticClass:"layoutMain"},[n("transition",{attrs:{name:"transition-page",mode:"out-in"}},[n("router-view")],1)],1)])},l=[],c={render:u,staticRenderFns:l},d=c,m=n("VU/8"),p=a,f=m(o,d,p,"data-v-e4a8810a",null);t.default=f.exports},iIC1:function(e,t){},"j/do":function(e,t){},lJ88:function(e,t){},lhgG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={name:"page-error-notFound"},s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"vcContainer",attrs:{type:"flex",justify:"center",align:"middle"}},[a("img",{attrs:{src:n("bR3z")}})])},r=[],i={render:s,staticRenderFns:r},o=i,u=n("VU/8"),l=u(a,o,null,null,null);t.default=l.exports},mdtY:function(e,t){},pkzQ:function(e,t){},psK2:function(e,t){},"q+hc":function(e,t){},qKch:function(e,t){},"s+3R":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Xxa5"),s=n.n(a),r=n("exGp"),i=n.n(r),o=n("VsUZ"),u={name:"page-dashboard",data:function(){return{data:[],loading:!1}},created:function(){this.initData()},watch:{$route:"initData"},methods:{initData:function(){var e=this;return i()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,o.a.assignment.all();case 4:e.data=t.sent.data;case 5:return t.prev=5,e.loading=!1,t.finish(5);case 8:case"end":return t.stop()}},t,e,[[1,,5,8]])}))()}}},l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-section-container",{directives:[{name:"loading",rawName:"v-loading.body",value:e.loading,expression:"loading",modifiers:{body:!0}}],key:"dashboard"},[n("ui-section",{attrs:{title:"作业列表",width:"700px"}},[n("ui-section-content",[n("div",{staticClass:"typo"},[n("table",{staticStyle:{width:"100%"}},[n("colgroup",[n("col"),e._v(" "),n("col",{staticStyle:{width:"200px"}}),e._v(" "),n("col",{staticStyle:{width:"200px"}})]),e._v(" "),n("thead",[n("tr",[n("th",[e._v("名称")]),e._v(" "),n("th",[e._v("开始时间")]),e._v(" "),n("th",[e._v("结束时间")])])]),e._v(" "),n("tbody",e._l(e.data,function(t){return n("tr",{key:t._id},[n("td",[n("router-link",{attrs:{to:{name:"AssignmentDetail",params:{aid:t._id}}}},[e._v(e._s(t.name))])],1),e._v(" "),n("td",[e._v(e._s(e._f("moment")(t.begin_at,"YYYY-MM-DD HH:mm:ss")))]),e._v(" "),n("td",[e._v(e._s(e._f("moment")(t.end_at,"YYYY-MM-DD HH:mm:ss")))])])}))])])])],1)],1)},c=[],d={render:l,staticRenderFns:c},m=d,p=n("VU/8"),f=p(u,m,null,null,null);t.default=f.exports},sh7P:function(e,t){},"tA/g":function(e,t){},voBo:function(e,t){},xPwM:function(e,t){},"z/ip":function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.9ddd5ad3ca4077997bdb.js.map