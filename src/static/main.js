webpackJsonp([0],{115:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=s(r),o=n(17),u=s(o),i=n(838),l=s(i),d=n(131),c=s(d),f=n(48),p=s(f),_=n(449),m=s(_),E=function(){function e(t){(0,a.default)(this,e),this._id=t._id,this.order=t.order,this.text=t.text,this.questions=(0,p.default)(t.questions,function(e){return new m.default(e)}),this.visible=t.visible,this.read_only=t.read_only,this.type=t.type||"default"}return(0,u.default)(e,[{key:"setText",value:function(e){var t=(0,c.default)(this);return t.text=e,t}},{key:"setQuestionNum",value:function(e){for(var t=(0,c.default)(this);e>t.questions.length;)t.questions.push(new m.default({text:""}));for(;e<t.questions.length;)t.questions.pop();return t}},{key:"setQuestionText",value:function(e,t){var n=(0,l.default)(this);return n.questions[e].text=t,n}},{key:"setQuestionOrder",value:function(e){var t=(0,c.default)(this);return t.order=e,t}},{key:"setVisible",value:function(e){var t=(0,c.default)(this);return t.visible=e,t}},{key:"getUpdateObject",value:function(){return{ptext:this.text,qtexts:(0,p.default)(this.questions,function(e){return e.text})}}},{key:"getUpdateMetaObject",value:function(){return{order:this.order,visible:this.visible}}}]),e}(),T=E;t.default=T;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(E,"Problem","/Users/joshoy/repo/TJLMS-FE/src/datamodels/problem.js"),__REACT_HOT_LOADER__.register(T,"default","/Users/joshoy/repo/TJLMS-FE/src/datamodels/problem.js"))}()},116:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AT=void 0;var r=n(3),a=s(r),o=(n(114),n(113)),u=s(o),i=n(56),l=s(i),d=n(172),c=s(d),f=n(55),p=s(f),_=n(2),m=s(_),E=n(131),T=s(E),g=n(132),h=s(g),A=n(117),y=s(A),v=n(451),R=s(v),O=t.AT=R.default,b=function e(){(0,m.default)(this,e)};b.fetchAssignmentListAsync=function(){return function(e){return function(){var t=(0,p.default)(l.default.mark(function t(){var n;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:O.FETCH_ASSIGNMENT_LIST.pending}),t.next=3,y.default.tokenGet("/api/manage/assignment");case 3:return n=t.sent,e({type:O.FETCH_ASSIGNMENT_LIST.success,payload:n}),t.abrupt("return",c.default.resolve());case 6:case"end":return t.stop()}},t,void 0)}));return function(){return t.apply(this,arguments)}}()()}},b.createAssignmentAsync=function(e,t,n,s){return function(r){return function(){var a=(0,p.default)(l.default.mark(function a(){var o,i,d;return l.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:O.CREATE_ASSIGNMENT.pending}),o=t.hour(0).minute(0).second(0).toDate().getTime(),i=n.hour(23).minute(59).second(59).toDate().getTime(),a.next=5,y.default.tokenPost("/api/manage/create/assignment",{name:e,begin_at:o,end_at:i,visible:s});case 5:if(d=a.sent,200===d.code){a.next=9;break}return u.default.error(d.reason),a.abrupt("return",d);case 9:return u.default.success("Assignment created."),r({type:O.CREATE_ASSIGNMENT.success,payload:d}),a.abrupt("return",c.default.resolve());case 12:case"end":return a.stop()}},a,void 0)}));return function(){return a.apply(this,arguments)}}()()}},b.fetchAssignmentDetailAsync=function(e){return function(t){return function(){var n=(0,p.default)(l.default.mark(function n(){var s;return l.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t({type:O.MANAGE_ASSIGNMENT.pending}),n.next=3,y.default.tokenGet("/api/manage/assignment/"+e);case 3:return s=n.sent,200===s.code?t({type:O.MANAGE_ASSIGNMENT.success,payload:s.data}):(u.default.error(s.reason),t({type:O.MANAGE_ASSIGNMENT.failed,payload:s})),n.abrupt("return",c.default.resolve(s));case 6:case"end":return n.stop()}},n,void 0)}));return function(){return n.apply(this,arguments)}}()()}},b.createProblemAsync=function(e,t,n,s,r){return function(a){return function(){var o=(0,p.default)(l.default.mark(function o(){var i;return l.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return a({type:O.CREATE_ASSIGNMENT.pending}),o.next=3,y.default.tokenPost("/api/manage/create/problem/"+e,{order:t,ptext:n,qtexts:s,visible:r});case 3:return i=o.sent,200===i.code?(u.default.success("Create success!"),a({type:O.CREATE_ASSIGNMENT.success,payload:i.data})):(u.default.error(i.reason),a({type:O.CREATE_ASSIGNMENT.failed,payload:i})),o.abrupt("return",c.default.resolve(i));case 6:case"end":return o.stop()}},o,void 0)}));return function(){return o.apply(this,arguments)}}()()}},b.resetNewProblemCreator=function(){return{type:O.INIT_PROBLEM_CREATOR}},b.updateProblemCreatorState=function(e,t,n,s){return{type:O.UPDATE_PROBLEM_CREATOR,payload:{qNum:e,pText:t,qTexts:n,visible:s}}},b.loadEditingProblem=function(e){return function(t,n){var s=n().admin.manageAssignmentObj,r=(0,h.default)(s.problems,function(t){return t._id===e});return t({type:O.LOAD_EDITING_PROBLEM,payload:(0,T.default)(r)}),c.default.resolve()}},b.updateEditingProblem=function(e){return{type:O.UPDATE_EDITING_PROBLEM,payload:e}},b.updateEditingAssignment=function(e){return{type:O.UPDATE_EDITING_ASSIGNMENT,payload:e}},b.saveChangesOfEditingProblemAsync=function(e,t){return function(n){return function(){var s=(0,p.default)(l.default.mark(function s(){var r;return l.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n({type:O.SAVE_EDITING_PROBLEM_CHANGES.pending}),s.next=3,y.default.tokenPost("/api/manage/update/problem/"+e._id+"/meta",(0,a.default)({},e.getUpdateMetaObject(),{assignment_id:t._id}));case 3:return s.next=5,y.default.tokenPost("/api/manage/update/problem/"+e._id+"/content",e.getUpdateObject());case 5:if(r=s.sent,200===r.code){s.next=9;break}return u.default.error(r.reason),s.abrupt("return",c.default.reject());case 9:return u.default.success("Save changes complete."),n({type:O.SAVE_EDITING_PROBLEM_CHANGES.success,payload:r}),s.abrupt("return",c.default.resolve());case 12:case"end":return s.stop()}},s,void 0)}));return function(){return s.apply(this,arguments)}}()()}},b.saveChangesOfEditingAssignmentAsync=function(e){return function(t){return function(){var n=(0,p.default)(l.default.mark(function n(){var s;return l.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t({type:O.SAVE_EDITING_ASSIGNMENT_CHANGES.pending}),n.next=3,y.default.tokenPost("/api/manage/update/assignment/"+e._id,e.getUpdateObject());case 3:if(s=n.sent,200===s.code){n.next=7;break}return u.default.error(s.reason),n.abrupt("return",c.default.reject());case 7:return u.default.success("Save changes complete."),t({type:O.SAVE_EDITING_ASSIGNMENT_CHANGES.success,payload:s}),n.abrupt("return",c.default.resolve());case 10:case"end":return n.stop()}},n,void 0)}));return function(){return n.apply(this,arguments)}}()()}};var L=b;t.default=L;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(O,"AT","/Users/joshoy/repo/TJLMS-FE/src/modules/admin/actions/index.js"),__REACT_HOT_LOADER__.register(b,"Actions","/Users/joshoy/repo/TJLMS-FE/src/modules/admin/actions/index.js"),__REACT_HOT_LOADER__.register(L,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/admin/actions/index.js"))}()},117:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(480),a=s(r),o=n(2),u=s(o),i=n(17),l=s(i),d=n(483),c=s(d),f=n(264),p=s(f),_=n(771),m=s(_),E=function(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t},T=function(e){var t="?",n=!0,s=!1,r=void 0;try{for(var a,o=(0,p.default)((0,c.default)(e));!(n=(a=o.next()).done);n=!0){var u=a.value;if(e[u]instanceof Array){var i=!0,l=!1,d=void 0;try{for(var f,_=(0,p.default)(e[u]);!(i=(f=_.next()).done);i=!0){var m=f.value;t+=window.encodeURIComponent(u)+"="+window.encodeURIComponent(m)+"&"}}catch(e){l=!0,d=e}finally{try{!i&&_.return&&_.return()}finally{if(l)throw d}}}else t+=window.encodeURIComponent(u)+"="+window.encodeURIComponent(e[u])+"&"}}catch(e){s=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(s)throw r}}return t.slice(0,t.length-1)},g=function(){function e(){(0,u.default)(this,e)}return(0,l.default)(e,null,[{key:"tokenGet",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,m.default)(""+e+T(t),{method:"GET",credentials:"include",headers:{Accept:"application/json;charset=utf-8","Content-Type":"application/json;charset=utf-8"}}).then(function(e){return E(e)}).then(function(e){return e.json()})}},{key:"tokenPost",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,m.default)(""+e,{method:"POST",credentials:"include",headers:{Accept:"application/json;charset=utf-8","Content-Type":"application/json;charset=utf-8"},body:(0,a.default)(t)}).then(function(e){return E(e)}).then(function(e){return e.json()})}},{key:"tokenPut",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,m.default)(""+e,{method:"PUT",headers:{credentials:!0,Accept:"application/json;charset=utf-8","Content-Type":"application/json;charset=utf-8"},body:(0,a.default)(t)}).then(function(e){return E(e)}).then(function(e){return e.json()})}},{key:"tokenDelete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,m.default)(""+e,{method:"DELETE",headers:{credentials:!0,Accept:"application/json;charset=utf-8","Content-Type":"application/json;charset=utf-8"},body:(0,a.default)(t)}).then(function(e){return E(e)}).then(function(e){return e.json()})}}]),e}(),h=g;t.default=h;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(g,"ApiUtil","/Users/joshoy/repo/TJLMS-FE/src/utils/api-util.js"),__REACT_HOT_LOADER__.register("","BASE_URL","/Users/joshoy/repo/TJLMS-FE/src/utils/api-util.js"),__REACT_HOT_LOADER__.register(E,"checkStatus","/Users/joshoy/repo/TJLMS-FE/src/utils/api-util.js"),__REACT_HOT_LOADER__.register(T,"parseQueryParams","/Users/joshoy/repo/TJLMS-FE/src/utils/api-util.js"),__REACT_HOT_LOADER__.register(h,"default","/Users/joshoy/repo/TJLMS-FE/src/utils/api-util.js"))}()},141:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=s(r),o=n(17),u=s(o),i=n(131),l=s(i),d=n(104),c=s(d),f=n(132),p=s(f),_=n(844),m=s(_),E=n(48),T=s(E),g=n(27),h=s(g),A=n(115),y=s(A),v=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(0,a.default)(this,e),this._id=t._id,this.name=t.name,this.begin_at=t.begin_at,this.end_at=t.end_at,this.problems=(0,T.default)(t.problems,function(e){return new y.default(e)})||[],this.visible=t.visible,this.submissions=t.submissions,this.read_only=t.read_only,n&&n.length&&(0,m.default)(this.problems,function(e){(0,m.default)(e.questions,function(e){var t=(0,p.default)(n,function(t){return t.question_id===e._id});t&&t.text&&(0,c.default)(e,{completedTag:!0})});var t=!!(0,p.default)(e.questions,function(e){return e.completedTag===!0}),s=!(0,p.default)(e.questions,function(e){return e.completedTag===!1});t&&(0,c.default)(e,{type:"halfAnswered"}),s&&(0,c.default)(e,{type:"answered"})})}return(0,u.default)(e,[{key:"getBeginAtMoment",value:function(){return(0,h.default)(this.begin_at)}},{key:"getEndAtMoment",value:function(){return(0,h.default)(this.end_at)}},{key:"setName",value:function(e){var t=(0,l.default)(this);return t.name=e,t}},{key:"setVisible",value:function(e){var t=(0,l.default)(this);return t.visible=e,t}},{key:"setTimeRange",value:function(e,t){var n=(0,h.default)(e),s=(0,h.default)(t),r=(0,l.default)(this);return r.begin_at=n.hour(0).minute(0).second(0).toDate().getTime(),r.end_at=s.hour(23).minute(59).second(59).toDate().getTime(),r}},{key:"getUpdateObject",value:function(){return{name:this.name,begin_at:this.begin_at,end_at:this.end_at,visible:this.visible}}}]),e}(),R=v;t.default=R;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(v,"Assignment","/Users/joshoy/repo/TJLMS-FE/src/datamodels/assignment.js"),__REACT_HOT_LOADER__.register(R,"default","/Users/joshoy/repo/TJLMS-FE/src/datamodels/assignment.js"))}()},171:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AT=void 0;var r=(n(114),n(113)),a=s(r),o=n(56),u=s(o),i=n(172),l=s(i),d=n(55),c=s(d),f=n(2),p=s(f),_=n(132),m=s(_),E=n(117),T=s(E),g=n(457),h=s(g),A=t.AT=h.default,y=function e(){(0,p.default)(this,e)};y.fetchAssignmentListAsync=function(){return function(e){return function(){var t=(0,c.default)(u.default.mark(function t(){var n;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:A.FETCH_ASSIGNMENTS.pending}),t.next=3,T.default.tokenGet("/api/assignment");case 3:return n=t.sent,e({type:A.FETCH_ASSIGNMENTS.success,payload:n}),t.abrupt("return",l.default.resolve());case 6:case"end":return t.stop()}},t,void 0)}));return function(){return t.apply(this,arguments)}}()()}},y.fetchAssignmentDetailAsync=function(e,t){return function(n){return function(){var s=(0,c.default)(u.default.mark(function s(){var r;return u.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n({type:A.FETCH_ASSIGNMENT_DETAIL.pending}),s.next=3,T.default.tokenGet("/api/assignment/"+e);case 3:if(r=s.sent,200===r.code){s.next=7;break}return a.default.error(r.reason),s.abrupt("return",l.default.reject());case 7:return n({type:A.FETCH_ASSIGNMENT_DETAIL.success,payload:r}),t&&n(y.setCurrentProblem((0,m.default)(r.data.problems,function(e){return e._id===t}))),s.abrupt("return",r);case 10:case"end":return s.stop()}},s,void 0)}));return function(){return s.apply(this,arguments)}}()()}},y.fetchProblemDetailAsync=function(e,t){return function(n){return function(){var s=(0,c.default)(u.default.mark(function s(){var r,o;return u.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n({type:A.FETCH_PROBLEM_DETAIL.pending}),s.prev=1,s.next=4,T.default.tokenGet("/api/assignment/"+e+"/"+t);case 4:if(r=s.sent,200===r.code){s.next=7;break}throw new Error(r.reason);case 7:return o=r.data,n(y.setCurrentProblem(o)),s.abrupt("return",r);case 12:throw s.prev=12,s.t0=s.catch(1),s.t0.reason?a.default.error(s.t0.reason):a.default.error("Fetch problem data failed."),new Error(s.t0);case 16:case"end":return s.stop()}},s,void 0,[[1,12]])}));return function(){return s.apply(this,arguments)}}()()}},y.setCurrentProblem=function(e){return function(t){return t({type:A.SET_CURRENT_PROBLEM,payload:e}),l.default.resolve()}},y.changeAnswerValue=function(e,t){return function(n){return window.UiAutosave||(window.UiAutosave=setTimeout(function(){n(y.submitAnswersAsync())},6e4)),n({type:A.CHANGE_ANSWER_VALUE,payload:{answerIdx:e,newValue:t}}),l.default.resolve()}},y.submitAnswersAsync=function(){return function(e,t){var n=t().assignments;return function(){var t=(0,c.default)(u.default.mark(function t(){var s;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:A.SUBMIT_ANSWERS.pending}),t.prev=1,t.next=4,T.default.tokenPost("/api/assignment/"+n.currentAssignment._id+"/"+n.currentProblem._id,{answers:n.currentAnswers});case 4:if(s=t.sent,200!==s.code){t.next=10;break}return a.default.success("Answers saved."),e({type:A.SUBMIT_ANSWERS.success,payload:s}),window.UiAutosave&&(clearTimeout(window.UiAutosave),window.UiAutosave=void 0),t.abrupt("return",0);case 10:return a.default.error(s.reason),e({type:A.SUBMIT_ANSWERS.failed,payload:s}),t.abrupt("return",new Error(s.reason));case 15:throw t.prev=15,t.t0=t.catch(1),a.default.error("Failed to connect to server"),new Error(t.t0);case 19:case"end":return t.stop()}},t,void 0,[[1,15]])}));return function(){return t.apply(this,arguments)}}()()}},y.changePwdAsync=function(e){return function(t){return function(){var n=(0,c.default)(u.default.mark(function n(){var s;return u.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t({type:A.CHANGE_PWD.pending}),n.next=3,T.default.tokenPost("/api/manage/user/update",{password:e});case 3:return s=n.sent,200===s.code?(a.default.success("Password changed."),t({type:A.CHANGE_PWD.success,payload:s})):(a.default.error(s.reason),t({type:A.CHANGE_PWD.failed,payload:s})),n.abrupt("return",s);case 6:case"end":return n.stop()}},n,void 0)}));return function(){return n.apply(this,arguments)}}()()}};var v=y;t.default=v;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(A,"AT","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/actions/index.js"),__REACT_HOT_LOADER__.register(y,"Actions","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/actions/index.js"),__REACT_HOT_LOADER__.register(v,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/actions/index.js"))}()},251:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.middleware=void 0;var r=n(23),a=s(r),o=n(2),u=s(o),i=n(17),l=s(i),d=n(6),c=s(d),f=n(5),p=s(f),_=n(1),m=s(_),E=n(42),T=n(382),g=n(318),h=s(g),A=(0,h.default)();window.UiHistory=A;var y=(0,T.routerMiddleware)(A),v=function(e){function t(e){(0,u.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.state={},n}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return m.default.createElement(T.ConnectedRouter,{history:A},m.default.createElement(E.BrowserRouter,null,m.default.createElement("div",{className:"router-root"},this.props.children)))}}]),t}(m.default.Component);v.propTypes={children:_.PropTypes.node.isRequired};var R=t.middleware=y,O=v;t.default=O;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(R,"middleware","/Users/joshoy/repo/TJLMS-FE/src/router.jsx"),__REACT_HOT_LOADER__.register(A,"history","/Users/joshoy/repo/TJLMS-FE/src/router.jsx"),__REACT_HOT_LOADER__.register(y,"midware","/Users/joshoy/repo/TJLMS-FE/src/router.jsx"),__REACT_HOT_LOADER__.register(v,"AppRouter","/Users/joshoy/repo/TJLMS-FE/src/router.jsx"),__REACT_HOT_LOADER__.register(O,"default","/Users/joshoy/repo/TJLMS-FE/src/router.jsx"))}()},261:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(23),a=s(r),o=n(2),u=s(o),i=n(17),l=s(i),d=n(6),c=s(d),f=n(5),p=s(f),_=n(1),m=s(_),E=n(8),T=s(E),g=function(e){function t(e){(0,u.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.getElemClassName=function(e){var t="";switch(e){case"current":t="assignments-question-tag--current";break;case"halfAnswered":t="assignments-question-tag--half-answered";break;case"answered":t="assignments-question-tag--answered";break;case"null":t="assignments-question-tag--null";break;default:t=""}return(0,T.default)("assignments-question-tag",t)},n.state={},n}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return m.default.createElement("div",{className:this.getElemClassName(this.props.type)},this.props.children)}}]),t}(m.default.Component);g.propTypes={children:_.PropTypes.node,type:_.PropTypes.oneOf(["default","current","halfAnswered","answered","null"])},g.defaultProps={children:"",type:"default"};var h=g;t.default=h;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(g,"ProblemTag","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/submodule/problem-tag/problem-tag.jsx"),__REACT_HOT_LOADER__.register(h,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/submodule/problem-tag/problem-tag.jsx"))}()},262:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AT=void 0;var r=n(56),a=s(r),o=(n(114),n(113)),u=s(o),i=n(55),l=s(i),d=n(2),c=s(d),f=n(17),p=s(f),_=n(117),m=s(_),E=n(469),T=s(E),g=n(76),h=s(g),A=t.AT=T.default,y=function(){function e(){(0,c.default)(this,e)}return(0,p.default)(e,null,[{key:"login",value:function(e){var t=this,n=e.username,s=e.password;return function(e,r){!function(){var o=(0,l.default)(a.default.mark(function o(){var i,l,d,c;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=(new Date).getTime().toString(),e({type:A.LOGIN.pending,payload:i}),t.next=4,m.default.tokenPost("/api/user/login",{username:n,password:s});case 4:if(l=t.sent,200===l.code){t.next=7;break}return t.abrupt("return",u.default.error(l.reason));case 7:if(d=r().login,d.latestLoginActionId===i){t.next=10;break}return t.abrupt("return",null);case 10:return e({type:A.LOGIN.success,payload:{username:n,actionId:i}}),c=u.default.loading("Fetching user status...",0),t.t0=e,t.next=15,h.default.fetchUserStatusAsync(e)();case 15:return t.t1=t.sent,(0,t.t0)(t.t1),c(),t.abrupt("return",null);case 19:case"end":return t.stop()}},o,t)}));return function(){return o.apply(this,arguments)}}()()}}}]),e}(),v=y;t.default=v;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(A,"AT","/Users/joshoy/repo/TJLMS-FE/src/modules/login/actions/index.js"),__REACT_HOT_LOADER__.register(y,"Actions","/Users/joshoy/repo/TJLMS-FE/src/modules/login/actions/index.js"),__REACT_HOT_LOADER__.register(v,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/login/actions/index.js"))}()},263:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AT=void 0;var r=n(56),a=s(r),o=(n(114),n(113)),u=s(o),i=n(55),l=s(i),d=n(2),c=s(d),f=n(117),p=s(f),_=n(475),m=s(_),E=t.AT=m.default,T=function e(){(0,c.default)(this,e)};T.fetchProblemHistoryList=function(e,t){return function(n){return function(){var s=(0,l.default)(a.default.mark(function s(){var r;return a.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n({type:E.FETCH_PROBLEM_HISTORY_LIST.pending}),s.prev=1,s.next=4,p.default.tokenGet("/api/assignment/history/list/"+e+"/"+t);case 4:if(r=s.sent,200===r.code){s.next=8;break}throw u.default.error(r.reason),new Error(r.reason);case 8:return n({type:E.FETCH_PROBLEM_HISTORY_LIST.success,payload:r.data}),s.abrupt("return",r);case 12:throw s.prev=12,s.t0=s.catch(1),new Error(s.t0);case 15:case"end":return s.stop()}},s,void 0,[[1,12]])}));return function(){return s.apply(this,arguments)}}()()}},T.fetchProblemHistoryDetail=function(e){return function(t){return function(){var n=(0,l.default)(a.default.mark(function n(){var s,r;return a.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s=u.default.loading("Retrieving history info..."),t({type:E.FETCH_PROBLEM_HISTORY_DETAIL.pending}),n.prev=2,n.next=5,p.default.tokenGet("/api/assignment/history/detail/"+e);case 5:if(r=n.sent,s(),200===r.code){n.next=10;break}throw u.default.error(r.reason),new Error(r.reason);case 10:return t({type:E.FETCH_PROBLEM_HISTORY_DETAIL.success,payload:r.data}),n.abrupt("return",r);case 14:throw n.prev=14,n.t0=n.catch(2),new Error(n.t0);case 17:case"end":return n.stop()}},n,void 0,[[2,14]])}));return function(){return n.apply(this,arguments)}}()()}},T.clearFetchProblemHistory=function(){return{type:E.CLEAR_PROBLEM_HISTORY}};var g=T;t.default=g;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(E,"AT","/Users/joshoy/repo/TJLMS-FE/src/modules/submission-history/actions/index.js"),__REACT_HOT_LOADER__.register(T,"Actions","/Users/joshoy/repo/TJLMS-FE/src/modules/submission-history/actions/index.js"),__REACT_HOT_LOADER__.register(g,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/submission-history/actions/index.js"))}()},394:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SubmissionHistory=t.Admin=t.Auth=t.Assignments=t.NotFound=t.Login=void 0;var r=n(470),a=s(r),o=n(473),u=s(o),i=n(458),l=s(i),d=n(466),c=s(d),f=n(452),p=s(f),_=n(476),m=s(_),E=t.Login=a.default,T=t.NotFound=u.default,g=t.Assignments=l.default,h=t.Auth=c.default,A=t.Admin=p.default,y=t.SubmissionHistory=m.default,v={Login:E,NotFound:T,Assignments:g,Auth:h,Admin:A,SubmissionHistory:y};t.default=v;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(E,"Login","/Users/joshoy/repo/TJLMS-FE/src/modules/index.js"),__REACT_HOT_LOADER__.register(T,"NotFound","/Users/joshoy/repo/TJLMS-FE/src/modules/index.js"),__REACT_HOT_LOADER__.register(g,"Assignments","/Users/joshoy/repo/TJLMS-FE/src/modules/index.js"),__REACT_HOT_LOADER__.register(h,"Auth","/Users/joshoy/repo/TJLMS-FE/src/modules/index.js"),__REACT_HOT_LOADER__.register(A,"Admin","/Users/joshoy/repo/TJLMS-FE/src/modules/index.js"),__REACT_HOT_LOADER__.register(y,"SubmissionHistory","/Users/joshoy/repo/TJLMS-FE/src/modules/index.js"),__REACT_HOT_LOADER__.register(v,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/index.js"))}()},395:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(249),a=n(1022),o=s(a),u=n(1020),i=s(u),l=n(251),d=n(474),c=s(d),f=null;if(window.APP_DEV_ENV){var p=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||r.compose;f=(0,r.createStore)(c.default,p((0,r.applyMiddleware)(o.default,l.middleware,(0,i.default)())))}else f=(0,r.createStore)(c.default,(0,r.applyMiddleware)(o.default,l.middleware,(0,i.default)()));var _=f,m=_;t.default=m;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(f,"store","/Users/joshoy/repo/TJLMS-FE/src/store.js"),__REACT_HOT_LOADER__.register(_,"storeExport","/Users/joshoy/repo/TJLMS-FE/src/store.js"),__REACT_HOT_LOADER__.register(m,"default","/Users/joshoy/repo/TJLMS-FE/src/store.js"))}()},397:function(e,t){},447:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(23),a=s(r),o=n(2),u=s(o),i=n(17),l=s(i),d=n(6),c=s(d),f=n(5),p=s(f),_=n(1),m=s(_),E=n(976),T=s(E),g=n(767),h=s(g);T.default.registerLanguage("cpp",h.default);var A=function(e){function t(){return(0,u.default)(this,t),(0,c.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return m.default.createElement(T.default,{language:this.props.language||"cpp",value:this.props.literal,inline:this.props.inline})}}]),t}(m.default.PureComponent);A.displayName="CodeBlock",A.propTypes={literal:_.PropTypes.string,language:_.PropTypes.string,inline:_.PropTypes.bool},A.defaultProps={literal:"",language:"cpp",inline:!1};var y=A;t.default=y;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(A,"CodeBlock","/Users/joshoy/repo/TJLMS-FE/src/common/components/code-renderer.jsx"),__REACT_HOT_LOADER__.register(y,"default","/Users/joshoy/repo/TJLMS-FE/src/common/components/code-renderer.jsx"))}()},448:function(e,t,n){"use strict";function s(e){return a.default.createElement("a",{href:e.href,target:"_blank",rel:"noopener noreferrer"},e.children)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var r=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(r);!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(s,"LinkRenderer","/Users/joshoy/repo/TJLMS-FE/src/common/components/link-renderer.jsx")}()},449:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),r=function(e){return e&&e.__esModule?e:{default:e}}(s),a=function e(t){(0,r.default)(this,e),this._id=t._id,this.text=t.text,this.completedTag=!1},o=a;t.default=o;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(a,"Question","/Users/joshoy/repo/TJLMS-FE/src/datamodels/question.js"),__REACT_HOT_LOADER__.register(o,"default","/Users/joshoy/repo/TJLMS-FE/src/datamodels/question.js"))}()},450:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var r=n(56),a=s(r),o=n(55),u=s(o),i=n(3),l=s(i),d=n(167),c=s(d);n(396);var f=n(1),p=s(f),_=n(22),m=s(_),E=n(32),T=n(42);n(398),n(397);var g=n(251),h=s(g),A=n(395),y=s(A),v=n(394),R=v.Admin.AssignmentManagement,O=v.Auth.Validation,b=function(e){var t=e.component,n=e.computedMatch,s=e.location,r=e.path,a=e.allowedRoles,o=e.children,u=(0,c.default)(e,["component","computedMatch","location","path","allowedRoles","children"]);return p.default.createElement(T.Route,(0,l.default)({computedMatch:n},u),p.default.createElement(O,{match:n,allowedRoles:a,location:s,path:r},p.default.createElement(t,{match:n,location:s,path:r},o)))};b.propTypes={component:p.default.PropTypes.func.isRequired,allowedRoles:p.default.PropTypes.arrayOf(p.default.PropTypes.string).isRequired,children:p.default.PropTypes.node,computedMatch:p.default.PropTypes.any,location:p.default.PropTypes.any,path:p.default.PropTypes.any},b.defaultProps={children:[],computedMatch:void 0,location:void 0,path:void 0},window.APP_DEV_ENV&&(window.UiStore=y.default);var L=function(){var e=(0,u.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m.default.render(p.default.createElement(E.Provider,{store:y.default},p.default.createElement(h.default,null,p.default.createElement(T.Switch,null,p.default.createElement(T.Route,{path:"/login",exact:!0,component:v.Login}),p.default.createElement(b,{path:"/assignments",exact:!0,allowedRoles:["admin","ta","student"],component:v.Assignments}),p.default.createElement(b,{path:"/assignments/change-pwd",exact:!0,allowedRoles:["admin","ta","student"],component:v.Assignments}),p.default.createElement(b,{path:"/assignments/:assignmentId",exact:!0,allowedRoles:["admin","ta","student"],component:v.Assignments}),p.default.createElement(b,{path:"/assignments/:assignmentId/:problemId",exact:!0,allowedRoles:["admin","ta","student"],component:v.Assignments}),p.default.createElement(b,{path:"/submission-history/:assignmentId/:problemId",exact:!0,allowedRoles:["admin","ta","student"],component:v.SubmissionHistory}),p.default.createElement(b,{path:"/submission-history/:assignmentId/:problemId/:historyId",exact:!0,allowedRoles:["admin","ta","student"],component:v.SubmissionHistory}),p.default.createElement(b,{path:"/admin",allowedRoles:["admin","ta"],component:v.Admin},p.default.createElement(T.Switch,null,p.default.createElement(T.Route,{path:"/admin/",exact:!0,component:function(){return null}}),p.default.createElement(T.Route,{path:"/admin/:assignmentId",component:R}),p.default.createElement(T.Route,{component:function(){return p.default.createElement(T.Redirect,{to:"/404"})}}))),p.default.createElement(T.Route,{path:"/auth",component:v.Auth}),p.default.createElement(T.Redirect,{exact:!0,from:"/",to:"/auth"}),p.default.createElement(T.Route,{component:v.NotFound})))),document.getElementById("app-root"));case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();L().catch(function(e){console.error(e)});!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(R,"AssignmentManagement","/Users/joshoy/repo/TJLMS-FE/src/entry/index.jsx"),__REACT_HOT_LOADER__.register(O,"Validation","/Users/joshoy/repo/TJLMS-FE/src/entry/index.jsx"),__REACT_HOT_LOADER__.register(b,"AuthRoute","/Users/joshoy/repo/TJLMS-FE/src/entry/index.jsx"),__REACT_HOT_LOADER__.register(L,"main","/Users/joshoy/repo/TJLMS-FE/src/entry/index.jsx"))}()},451:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){return"admin/"+e},r=function(e){return{pending:s(e+"_PENDING"),success:s(e+"_SUCCESS"),failed:s(e+"_FAILED")}},a={FETCH_ASSIGNMENT_LIST:r("FETCH_ASSIGNMENT_LIST"),CREATE_ASSIGNMENT:r("CREATE_ASSIGNMENT"),MANAGE_ASSIGNMENT:r("MANAGE_ASSIGNMENT"),CREATE_PROBLEM:r("CREATE_PROBLEM"),INIT_PROBLEM_CREATOR:s("INIT_PROBLEM_CREATOR"),UPDATE_PROBLEM_CREATOR:s("UPDATE_PROBLEM_CREATOR"),LOAD_EDITING_PROBLEM:s("LOAD_EDITING_PROBLEM"),UPDATE_EDITING_PROBLEM:s("UPDATE_EDITING_PROBLEM"),UPDATE_EDITING_ASSIGNMENT:s("UPDATE_EDITING_ASSIGNMENT"),SAVE_EDITING_PROBLEM_CHANGES:r("SAVE_EDITING_PROBLEM_CHANGES"),SAVE_EDITING_ASSIGNMENT_CHANGES:r("SAVE_EDITING_ASSIGNMENT_CHANGES")};t.default=a;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(s,"wrapByNamespace","/Users/joshoy/repo/TJLMS-FE/src/modules/admin/actions/types.js"),__REACT_HOT_LOADER__.register(r,"createAsyncActions","/Users/joshoy/repo/TJLMS-FE/src/modules/admin/actions/types.js"),__REACT_HOT_LOADER__.register(a,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/admin/actions/types.js"))}()},452:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=(n(74),n(73)),a=s(r),o=(n(140),n(139)),u=s(o),i=(n(169),n(68)),l=s(i),d=(n(57),n(75)),c=s(d),f=n(3),p=s(f),_=n(23),m=s(_),E=n(2),T=s(E),g=n(17),h=s(g),A=n(6),y=s(A),v=n(5),R=s(v),O=(n(254),n(253)),b=s(O),L=n(48),S=s(L),C=n(1),P=s(C),j=n(32),M=n(42),w=n(27),D=s(w);n(741);var x=n(116),H=s(x),I=n(76),N=s(I),U=n(454),F=s(U),k=b.default.RangePicker,J=function(e){function t(e){(0,T.default)(this,t);var n=(0,y.default)(this,(t.__proto__||(0,m.default)(t)).call(this,e));return n.onClickCreateAssignmentBtn=function(){n.props.dispatch(H.default.createAssignmentAsync(n.state.createAssignmentName,n.state.createAssignmentTimeStart,n.state.createAssignmentTimeEnd,n.state.createAssignmentVisible)).then(function(){n.props.dispatch(H.default.fetchAssignmentListAsync())})},n.onClickLogout=function(){n.props.dispatch(N.default.logoutAsync())},n.stateValueChg={newAssignmentName:function(e){var t=e.target.value;return n.setState((0,p.default)({},n.state,{createAssignmentName:t}))},newAssignmentAvailableTime:function(e){var t=e[0],s=e[1];return n.setState((0,p.default)({},n.state,{createAssignmentTimeStart:t,createAssignmentTimeEnd:s}))},newAssignmentVisible:function(){return n.setState((0,p.default)({},n.state,{createAssignmentVisible:!n.state.createAssignmentVisible}))}},n.renderAssignmentsList=function(){return n.props.assignmentListIsLoading?P.default.createElement("div",null,"Loading assignments..."):n.props.assignmentList.length?(0,S.default)(n.props.assignmentList,function(e){return P.default.createElement("li",{key:e._id},P.default.createElement(M.Link,{to:n.props.match.path+"/"+e._id},e.name),P.default.createElement("span",null,"(",e._id,")"))}):P.default.createElement("div",null,"No assignment created yet.")},n.state={createAssignmentName:"",createAssignmentTimeStart:(0,D.default)(),createAssignmentTimeEnd:(0,D.default)(),createAssignmentVisible:!1},n}return(0,R.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(H.default.fetchAssignmentListAsync())}},{key:"render",value:function(){var e=this.props.userStatus;return P.default.createElement("div",{className:"app-module relative full-size admin"},P.default.createElement("h1",{className:"text-align-center"},P.default.createElement("span",null,"Welcome, ",e?e.username:"","! "),P.default.createElement("a",{onClick:this.onClickLogout},"Click here to logout")),P.default.createElement("div",{className:"admin-wrapper"},P.default.createElement("div",{className:"admin__assignments"},P.default.createElement("h2",null,"Assignments created"),P.default.createElement("ol",null,this.renderAssignmentsList())),P.default.createElement("div",{className:"m-t-lg admin__create-assignments"},P.default.createElement("h2",null,"Create assignment"),P.default.createElement("div",{className:"form"},P.default.createElement("div",null,P.default.createElement("label",{htmlFor:"id-create-assignment-name"},"New assignment name:"),P.default.createElement(c.default,{id:"id-create-assignment-name",type:"text",value:this.state.createAssignmentName,onChange:this.stateValueChg.newAssignmentName}),P.default.createElement("label",{htmlFor:"id-create-assignment-time-range"},"Available time:"),P.default.createElement("br",null),P.default.createElement(k,{id:"id-create-assignment-time-range",allowClear:!1,value:[this.state.createAssignmentTimeStart,this.state.createAssignmentTimeEnd],onChange:this.stateValueChg.newAssignmentAvailableTime}),P.default.createElement("br",null),P.default.createElement("label",{htmlFor:"id-create-assignment-visible"},"Visible:"),P.default.createElement("br",null),P.default.createElement(u.default,{checked:this.state.createAssignmentVisible,checkedChildren:P.default.createElement(l.default,{type:"check"}),unCheckedChildren:P.default.createElement(l.default,{type:"cross"}),onChange:this.stateValueChg.newAssignmentVisible}),P.default.createElement("br",null),P.default.createElement(a.default,{className:"m-t-md",type:"primary",onClick:this.onClickCreateAssignmentBtn},"Create")))),P.default.createElement("div",{className:"m-t-md"},P.default.createElement("h2",null,"Manage assignment"),P.default.createElement("div",{className:"admin__assignment-manage"},this.props.children))))}}]),t}(P.default.Component);J.propTypes={dispatch:C.PropTypes.func.isRequired,match:C.PropTypes.object.isRequired,userStatus:C.PropTypes.shape({realname:C.PropTypes.string,role:C.PropTypes.string,student_number:C.PropTypes.oneOfType([C.PropTypes.number,C.PropTypes.string]),username:C.PropTypes.string}),assignmentList:C.PropTypes.array,assignmentListIsLoading:C.PropTypes.bool,children:C.PropTypes.node},J.defaultProps={userStatus:null,assignmentListIsLoading:!1,assignmentList:[],children:[]},J.AssignmentManagement=F.default;var G=function(e){return{userStatus:e.auth.userStatus,assignmentList:e.admin.assignmentList,assignmentListIsLoading:e.admin.assignmentListIsLoading}},q=function(e){return{dispatch:e}},B=(0,j.connect)(G,q)(J);t.default=B;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(k,"RangePicker","/Users/joshoy/repo/TJLMS-FE/src/modules/admin/index.jsx"),__REACT_HOT_LOADER__.register(J,"AdminModule","/Users/joshoy/repo/TJLMS-FE/src/modules/admin/index.jsx"),__REACT_HOT_LOADER__.register(G,"mapStateToProps","/Users/joshoy/repo/TJLMS-FE/src/modules/admin/index.jsx"),__REACT_HOT_LOADER__.register(q,"mapDispatchesToProps","/Users/joshoy/repo/TJLMS-FE/src/modules/admin/index.jsx"),__REACT_HOT_LOADER__.register(B,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/admin/index.jsx"))}()},453:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments[1];return void 0!==t.actionId&&(0,l.default)(e.asyncActionIdsInObserve,t.actionId)===!1?e:(E[t.type||""]||function(e){return e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var a,o=n(10),u=s(o),i=n(105),l=s(i),d=n(104),c=s(d),f=n(141),p=s(f),_=n(116),m={asyncActionIdsInObserve:[],assignmentList:[],assignmentListIsLoading:!0,creatingProblemTotalQuestionNum:1,creatingProblemText:"",creatingProblemQuestionTexts:[""],creatingProblemVisible:!0,manageAssignmentObj:null,editingProblem:null},E=(a={},(0,u.default)(a,_.AT.FETCH_ASSIGNMENT_LIST.pending,function(e){return(0,c.default)({},e,{assignmentListIsLoading:!0})}),(0,u.default)(a,_.AT.FETCH_ASSIGNMENT_LIST.success,function(e,t){var n=t.payload;return(0,c.default)({},e,{assignmentListIsLoading:!1,assignmentList:n.data})}),(0,u.default)(a,_.AT.MANAGE_ASSIGNMENT.success,function(e,t){var n=t.payload;return(0,c.default)({},e,{manageAssignmentObj:new p.default(n)})}),(0,u.default)(a,_.AT.INIT_PROBLEM_CREATOR,function(e){return(0,c.default)({},e,{creatingProblemTotalQuestionNum:1,creatingProblemText:"",creatingProblemQuestionTexts:[""]})}),(0,u.default)(a,_.AT.UPDATE_PROBLEM_CREATOR,function(e,t){var n=t.payload,s=n.qNum,r=n.pText,a=n.qTexts,o=n.visible;return(0,c.default)({},e,{creatingProblemTotalQuestionNum:s,creatingProblemText:r,creatingProblemQuestionTexts:a,creatingProblemVisible:o})}),(0,u.default)(a,_.AT.LOAD_EDITING_PROBLEM,function(e,t){var n=t.payload;return(0,c.default)({},e,{editingProblem:n})}),(0,u.default)(a,_.AT.UPDATE_EDITING_PROBLEM,function(e,t){var n=t.payload;return(0,c.default)({},e,{editingProblem:n})}),(0,u.default)(a,_.AT.UPDATE_EDITING_ASSIGNMENT,function(e,t){var n=t.payload;return(0,c.default)({},e,{manageAssignmentObj:n})}),a),T=r;t.default=T;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(r,"reducerFn","/Users/joshoy/repo/TJLMS-FE/src/modules/admin/reducer/index.js"),__REACT_HOT_LOADER__.register(m,"initState","/Users/joshoy/repo/TJLMS-FE/src/modules/admin/reducer/index.js"),__REACT_HOT_LOADER__.register(E,"handleDispatches","/Users/joshoy/repo/TJLMS-FE/src/modules/admin/reducer/index.js"),__REACT_HOT_LOADER__.register(T,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/admin/reducer/index.js"))}()},454:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=(n(74),n(73)),a=s(r),o=(n(140),n(139)),u=s(o),i=(n(169),n(68)),l=s(i),d=(n(57),n(75)),c=s(d),f=n(23),p=s(f),_=n(2),m=s(_),E=n(17),T=s(E),g=n(6),h=s(g),A=n(5),y=s(A),v=(n(254),n(253)),R=s(v),O=n(48),b=s(O),L=n(1),S=s(L),C=n(32),P=n(27),j=s(P),M=n(42),w=n(116),D=s(w),x=n(455),H=s(x),I=n(456),N=s(I),U=R.default.RangePicker,F=function(e){function t(e){(0,m.default)(this,t);var n=(0,h.default)(this,(t.__proto__||(0,p.default)(t)).call(this,e));return n.onChangeName=function(e){n.props.dispatch(D.default.updateEditingAssignment(n.props.manageAssignmentObj.setName(e.target.value)))},n.onChangeTimeRange=function(e){n.props.dispatch(D.default.updateEditingAssignment(n.props.manageAssignmentObj.setTimeRange(e[0],e[1])))},n.onChangeVisible=function(e){n.props.dispatch(D.default.updateEditingAssignment(n.props.manageAssignmentObj.setVisible(e)))},n.onSubmitAssignmentChanges=function(){n.props.dispatch(D.default.saveChangesOfEditingAssignmentAsync(n.props.manageAssignmentObj))},n.fetchAssignmentDetailAsync=function(e){return n.props.dispatch(D.default.fetchAssignmentDetailAsync(e))},n.renderProblems=function(e){var t=n.props.match.path.replace(":assignmentId",n.props.match.params.assignmentId);return e&&e.length?(0,b.default)(e,function(e){return S.default.createElement(M.Link,{to:t+"/"+e._id,className:"problem-item",key:e._id},"Problem "+e.order)}).concat(S.default.createElement(M.Link,{key:"new",className:"problem-item",to:t+"/new"},"Create a new question")):S.default.createElement("div",null,S.default.createElement("span",null,"No problems available."),S.default.createElement(M.Link,{to:t+"/new"},"Create a new question"),".")},n.state={},n.disableInspect={match:n.props.match},n}return(0,y.default)(t,e),(0,T.default)(t,[{key:"componentDidMount",value:function(){this.fetchAssignmentDetailAsync(this.props.match.params.assignmentId)}},{key:"componentWillReceiveProps",value:function(e){this.props.match&&this.props.match.params&&this.props.match.params.assignmentId&&e.match&&e.match.params&&e.match.params.assignmentId&&this.props.match.params.assignmentId!==e.match.params.assignmentId&&this.fetchAssignmentDetailAsync(e.match.params.assignmentId)}},{key:"render",value:function(){var e=this,t=this.props.manageAssignmentObj;return S.default.createElement("div",{className:"m-t-s admin-assignment-management"},S.default.createElement("div",null,S.default.createElement("h3",null,"Object ID: ",t?t._id:"")),S.default.createElement("div",null,S.default.createElement("span",null,"Name: "),S.default.createElement(c.default,{value:t?t.name:"",onChange:this.onChangeName})),S.default.createElement("div",{className:"m-t-s"},S.default.createElement("span",null,"Available time range:"),S.default.createElement("br",null),S.default.createElement(U,{value:[t?t.getBeginAtMoment():(0,j.default)(),t?t.getEndAtMoment():(0,j.default)()],onChange:this.onChangeTimeRange})),S.default.createElement("div",{className:"m-t-s"},S.default.createElement("span",null,"Assignment visible:"),S.default.createElement("br",null),S.default.createElement(u.default,{checkedChildren:S.default.createElement(l.default,{type:"check"}),unCheckedChildren:S.default.createElement(l.default,{type:"cross"}),checked:!!t&&t.visible,onChange:this.onChangeVisible})),S.default.createElement("div",{className:"m-t-s"},S.default.createElement(a.default,{type:"primary",onClick:this.onSubmitAssignmentChanges},"Save assignment config")),S.default.createElement("div",{className:"m-t-lg problem-items-container"},S.default.createElement("h3",null,"Created problems"),S.default.createElement("div",null,this.renderProblems(t?t.problems:[]))),S.default.createElement("div",{className:"m-t-s"},S.default.createElement(M.Route,{path:this.props.match.path+"/new",component:function(n){var s=n.match;return S.default.createElement(H.default,{assignmentId:e.props.match?e.props.match.params.assignmentId:"",order:t?t.problems.length+1:1,match:s})}}),S.default.createElement(M.Route,{path:this.props.match.path+"/:problemId",component:N.default})))}}]),t}(S.default.Component);F.propTypes={dispatch:L.PropTypes.func.isRequired,match:L.PropTypes.object.isRequired,manageAssignmentObj:L.PropTypes.object},F.defaultProps={manageAssignmentId:null,manageAssignmentObj:{}};var k=function(e){return{manageAssignmentObj:e.admin.manageAssignmentObj}},J=function(e){return{dispatch:e}},G=(0,C.connect)(k,J)(F);t.default=G;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(U,"RangePicker","/Users/joshoy/repo/TJLMS-FE/src/modules/admin/submodules/assignment-management.jsx"),__REACT_HOT_LOADER__.register(F,"AssignmentManagement","/Users/joshoy/repo/TJLMS-FE/src/modules/admin/submodules/assignment-management.jsx"),__REACT_HOT_LOADER__.register(k,"mapStateToProps","/Users/joshoy/repo/TJLMS-FE/src/modules/admin/submodules/assignment-management.jsx"),__REACT_HOT_LOADER__.register(J,"mapDispatchesToProps","/Users/joshoy/repo/TJLMS-FE/src/modules/admin/submodules/assignment-management.jsx"),__REACT_HOT_LOADER__.register(G,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/admin/submodules/assignment-management.jsx"))}()},455:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=(n(74),n(73)),a=s(r),o=(n(140),n(139)),u=s(o),i=(n(258),n(257)),l=s(i),d=(n(57),n(75)),c=s(d),f=n(23),p=s(f),_=n(2),m=s(_),E=n(17),T=s(E),g=n(6),h=s(g),A=n(5),y=s(A),v=n(48),R=s(v),O=n(1),b=s(O),L=n(32),S=n(116),C=s(S),P=function(e){function t(e){(0,m.default)(this,t);var n=(0,h.default)(this,(t.__proto__||(0,p.default)(t)).call(this,e));return n.onTextChange=function(e){n.props.dispatch(C.default.updateProblemCreatorState(n.props.creatingProblemTotalQuestionNum,e.target.value,n.props.creatingProblemQuestionTexts,n.props.creatingProblemVisible))},n.onQNumChange=function(e){var t=n.props.creatingProblemQuestionTexts.concat();if(e>n.props.creatingProblemTotalQuestionNum)for(;t.length<e;)t.push("");if(e<n.props.creatingProblemTotalQuestionNum)for(;t.length>e;)t.pop();n.props.dispatch(C.default.updateProblemCreatorState(e,n.props.creatingProblemText,t,n.props.creatingProblemVisible))},n.onChangeQuestionText=function(e){return function(t){var s=n.props.creatingProblemQuestionTexts.concat();s[e]=t.target.value,n.props.dispatch(C.default.updateProblemCreatorState(n.props.creatingProblemTotalQuestionNum,n.props.creatingProblemText,s,n.props.creatingProblemVisible))}},n.onSwitchVisible=function(e){n.props.dispatch(C.default.updateProblemCreatorState(n.props.creatingProblemTotalQuestionNum,n.props.creatingProblemText,n.props.creatingProblemQuestionTexts,e))},n.onClickCreateBtn=function(){n.props.dispatch(C.default.createProblemAsync(n.props.assignmentId,n.props.order,n.props.creatingProblemText,n.props.creatingProblemQuestionTexts,n.props.creatingProblemVisible)).then(function(){n.props.dispatch(C.default.resetNewProblemCreator()),n.props.dispatch(C.default.fetchAssignmentDetailAsync(n.props.assignmentId))})},n.renderQuestionsSet=function(){var e=n.props,t=(e.creatingProblemTotalQuestionNum,e.creatingProblemQuestionTexts);return t.length,(0,R.default)(t,function(e,t){return b.default.createElement("li",{key:"question-"+(t+1)},b.default.createElement("h5",null,"Question "+(t+1)+":"),b.default.createElement(c.default,{type:"textarea",value:e,onChange:n.onChangeQuestionText(t)}))})},n.state={},n}return(0,y.default)(t,e),(0,T.default)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(C.default.resetNewProblemCreator())}},{key:"render",value:function(){var e=this.props,t=e.creatingProblemTotalQuestionNum,n=e.creatingProblemText;return b.default.createElement("div",{className:"m-t-s new-problem-creator"},b.default.createElement("h3",{className:"m-b-s"},"Create a new problem"),b.default.createElement("h4",null,"Problem text (markdown):"),b.default.createElement(c.default,{type:"textarea",rows:8,value:n,onChange:this.onTextChange}),b.default.createElement("h4",null,"Total question num:"),b.default.createElement(l.default,{min:1,value:t,onChange:this.onQNumChange}),b.default.createElement("div",{className:"m-t-s"},b.default.createElement("span",null,"Visible: "),b.default.createElement("br",null),b.default.createElement(u.default,{checked:this.props.creatingProblemVisible,onChange:this.onSwitchVisible})),b.default.createElement("h4",{className:"m-t-md m-b-md"},"Question Texts:"),b.default.createElement("ol",{className:"m-t-md m-b-md"},this.renderQuestionsSet()),b.default.createElement("div",{className:"m-t-md m-b-lg"},b.default.createElement(a.default,{type:"primary",onClick:this.onClickCreateBtn},"Create")))}}]),t}(b.default.Component);P.propTypes={dispatch:O.PropTypes.func.isRequired,creatingProblemTotalQuestionNum:O.PropTypes.number,creatingProblemText:O.PropTypes.string,creatingProblemQuestionTexts:O.PropTypes.arrayOf(O.PropTypes.string),assignmentId:O.PropTypes.string.isRequired,order:O.PropTypes.number.isRequired,creatingProblemVisible:O.PropTypes.bool.isRequired},P.defaultProps={creatingProblemTotalQuestionNum:1,creatingProblemText:"",creatingProblemQuestionTexts:[""]};var j=function(e){return{creatingProblemTotalQuestionNum:e.admin.creatingProblemTotalQuestionNum,creatingProblemText:e.admin.creatingProblemText,creatingProblemQuestionTexts:e.admin.creatingProblemQuestionTexts,creatingProblemVisible:e.admin.creatingProblemVisible}},M=function(e){return{dispatch:e}},w=(0,L.connect)(j,M)(P);t.default=w;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(P,"NewProblemCreator","/Users/joshoy/repo/TJLMS-FE/src/modules/admin/submodules/new-problem-creator.jsx"),__REACT_HOT_LOADER__.register(j,"mapStateToProps","/Users/joshoy/repo/TJLMS-FE/src/modules/admin/submodules/new-problem-creator.jsx"),__REACT_HOT_LOADER__.register(M,"mapDispatchesToProps","/Users/joshoy/repo/TJLMS-FE/src/modules/admin/submodules/new-problem-creator.jsx"),__REACT_HOT_LOADER__.register(w,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/admin/submodules/new-problem-creator.jsx"))}()},456:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=(n(74),n(73)),a=s(r),o=(n(140),n(139)),u=s(o),i=(n(258),n(257)),l=s(i),d=(n(57),n(75)),c=s(d),f=n(23),p=s(f),_=n(2),m=s(_),E=n(17),T=s(E),g=n(6),h=s(g),A=n(5),y=s(A),v=n(48),R=s(v),O=n(1),b=s(O),L=n(32),S=n(115),C=s(S),P=n(116),j=s(P),M=function(e){function t(e){(0,m.default)(this,t);var n=(0,h.default)(this,(t.__proto__||(0,p.default)(t)).call(this,e));return n.onTextChange=function(e){var t=n.props.editingProblem,s=t.setText(e.target.value);n.props.dispatch(j.default.updateEditingProblem(s))},n.onQNumChange=function(e){var t=n.props.editingProblem,s=t.setQuestionNum(e);n.props.dispatch(j.default.updateEditingProblem(s))},n.onChangeQuestionText=function(e){return function(t){var s=n.props.editingProblem,r=s.setQuestionText(e,t.target.value);n.props.dispatch(j.default.updateEditingProblem(r))}},n.onChangeOrder=function(e){var t=n.props.editingProblem,s=t.setQuestionOrder(e);n.props.dispatch(j.default.updateEditingProblem(s))},n.onSwitchVisible=function(e){var t=n.props.editingProblem,s=t.setVisible(e);n.props.dispatch(j.default.updateEditingProblem(s))},n.onClickSaveChangesBtn=function(){n.props.dispatch(j.default.saveChangesOfEditingProblemAsync(n.props.editingProblem,n.props.manageAssignmentObj)).then(function(){n.props.dispatch(j.default.fetchAssignmentDetailAsync(n.props.manageAssignmentObj._id))})},n.renderQuestionsSet=function(){var e=n.props.editingProblem;return e?(0,R.default)(e.questions,function(e,t){return b.default.createElement("li",{key:"question-"+(t+1)},b.default.createElement("h5",null,"Question "+(t+1)+":"),b.default.createElement(c.default,{type:"textarea",value:e.text,onChange:n.onChangeQuestionText(t)}))}):[]},n.state={},n.__disableInspect={manageAssignmentObj:n.props.manageAssignmentObj},n}return(0,y.default)(t,e),(0,T.default)(t,[{key:"componentDidMount",value:function(){this.props.manageAssignmentObj&&this.props.dispatch(j.default.loadEditingProblem(this.props.match.params.problemId))}},{key:"componentWillReceiveProps",value:function(e){return e.manageAssignmentObj&&!this.props.manageAssignmentObj?(this.props.dispatch(j.default.loadEditingProblem(e.match.params.problemId)),null):(e.manageAssignmentObj&&e.match.params.problemId!==this.props.match.params.problemId&&this.props.dispatch(j.default.loadEditingProblem(e.match.params.problemId)),null)}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.editingProblem;return"new"===e.match.params.problemId?b.default.createElement("div",null):b.default.createElement("div",{className:"m-t-s new-problem-creator"},b.default.createElement("h3",{className:"m-b-s"},"Manage problem"),b.default.createElement("h4",null,"Problem text (markdown):"),b.default.createElement(c.default,{type:"textarea",rows:8,value:t?t.text:"",onChange:this.onTextChange}),b.default.createElement("div",null,b.default.createElement("h4",null,"Total question num:"),b.default.createElement(l.default,{min:1,value:t?t.questions.length:1,onChange:this.onQNumChange})),b.default.createElement("div",{className:"m-t-s"},b.default.createElement("span",null,"Visible: "),b.default.createElement("br",null),b.default.createElement(u.default,{checked:!!t&&t.visible,onChange:this.onSwitchVisible})),b.default.createElement("div",{className:"m-t-s"},b.default.createElement("span",null,"Problem order: "),b.default.createElement("br",null),b.default.createElement(l.default,{value:t?t.order:0,onChange:this.onChangeOrder})),b.default.createElement("h4",{className:"m-t-md m-b-md"},"Question Texts:"),b.default.createElement("ol",{className:"m-t-md m-b-md"},this.renderQuestionsSet()),b.default.createElement("div",{className:"m-t-md m-b-lg"},b.default.createElement(a.default,{type:"primary",onClick:this.onClickSaveChangesBtn},"Save changes")))}}]),t}(b.default.Component);M.propTypes={dispatch:O.PropTypes.func.isRequired,editingProblem:O.PropTypes.instanceOf(C.default),manageAssignmentObj:O.PropTypes.object,match:O.PropTypes.object.isRequired},M.defaultProps={editingProblem:null,manageAssignmentObj:null};var w=function(e){return{manageAssignmentObj:e.admin.manageAssignmentObj,editingProblem:e.admin.editingProblem}},D=function(e){return{dispatch:e}},x=(0,L.connect)(w,D)(M);t.default=x;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(M,"ProblemManager","/Users/joshoy/repo/TJLMS-FE/src/modules/admin/submodules/problem-manager.jsx"),__REACT_HOT_LOADER__.register(w,"mapStateToProps","/Users/joshoy/repo/TJLMS-FE/src/modules/admin/submodules/problem-manager.jsx"),__REACT_HOT_LOADER__.register(D,"mapDispatchesToProps","/Users/joshoy/repo/TJLMS-FE/src/modules/admin/submodules/problem-manager.jsx"),__REACT_HOT_LOADER__.register(x,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/admin/submodules/problem-manager.jsx"))}()},457:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){return"assignments/"+e},r=function(e){return{pending:s(e+"_PENDING"),success:s(e+"_SUCCESS"),failed:s(e+"_FAILED")}},a={FETCH_ASSIGNMENTS:r("FETCH_ASSIGNMENTS"),FETCH_ASSIGNMENT_DETAIL:r("FETCH_ASSIGNMENT_DETAIL"),FETCH_PROBLEM_DETAIL:r("FETCH_PROBLEM_DETAIL"),SET_CURRENT_PROBLEM:s("SET_CURRENT_PROBLEM"),CHANGE_ANSWER_VALUE:s("CHANGE_ANSWER_VALUE"),SUBMIT_ANSWERS:r("SUBMIT_ANSWERS"),CHANGE_PWD:r("CHANGE_PWD")};t.default=a;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(s,"wrapByNamespace","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/actions/types.js"),__REACT_HOT_LOADER__.register(r,"createAsyncActions","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/actions/types.js"),__REACT_HOT_LOADER__.register(a,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/actions/types.js"))}()},458:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=(n(74),n(73)),a=s(r),o=n(23),u=s(o),i=n(2),l=s(i),d=n(17),c=s(d),f=n(6),p=s(f),_=n(5),m=s(_),E=n(48),T=s(E),g=n(132),h=s(g),A=n(1),y=s(A),v=n(32),R=n(42),O=n(978),b=s(O),L=n(27),S=s(L),C=n(141),P=s(C),j=n(115),M=s(j);n(742);var w=n(461),D=s(w),x=n(463),H=n(460),I=s(H),N=n(447),U=s(N),F=n(448),k=s(F),J=n(462),G=s(J),q=n(171),B=s(q),V=function(e){function t(e){(0,l.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return n.onClickSaveBtn=function(){n.props.dispatch(B.default.submitAnswersAsync()).then(function(e){return e?(console.error(e),null):n.props.dispatch(B.default.fetchAssignmentDetailAsync(n.props.currentAssignment._id,n.props.currentProblem._id))})},n.renderQuestionsAndAnswers=function(){var e=n.props,t=e.currentAssignment,s=e.currentProblem,r=e.currentAnswers,a=e.dispatch;if(!s)return[];var o=(0,T.default)(s.questions,function(e,n){return y.default.createElement("li",{key:"question-item-"+e._id},y.default.createElement(b.default,{className:"app-markdown assignments__question-item",source:e.text||"",escapeHtml:!0,renderers:{CodeBlock:U.default,Code:U.default,Link:k.default}}),y.default.createElement(I.default,{label:n+1,value:r[n].text,onChange:function(e){a(B.default.changeAnswerValue(n,e.target.value))},disabled:s.read_only||t.begin_at>(new Date).getTime()||t.end_at<(new Date).getTime()}))});return y.default.createElement("div",{className:"assignments__answers-container"},y.default.createElement("ol",{className:"assignments__answers-list"},o))},n.state={},n.__disableInspect={currentAssignment:n.props.currentAssignment},n}return(0,m.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){var e=this;window.UiAutosave&&(clearTimeout(window.UiAutosave),window.UiAutosave=void 0),this.props.dispatch(B.default.fetchAssignmentListAsync()).then(function(){if(e.props.match.params.assignmentId){var t=e.props.match.params,n=t.assignmentId,s=t.problemId;e.props.dispatch(B.default.fetchAssignmentDetailAsync(n,s))}})}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.match.params.assignmentId&&e.match.params.assignmentId!==this.props.match.params.assignmentId&&this.props.dispatch(B.default.fetchAssignmentDetailAsync(e.match.params.assignmentId,this.props.match.params.problemId)),e.match.params.problemId&&e.match.params.problemId!==this.props.match.params.problemId&&e.currentAssignment&&(window.UiAutosave&&(clearTimeout(window.UiAutosave),window.UiAutosave=void 0),this.props.dispatch(B.default.fetchAssignmentDetailAsync(e.match.params.assignmentId,this.props.match.params.problemId)).then(function(){t.props.dispatch(B.default.setCurrentProblem((0,h.default)(e.currentAssignment.problems,function(t){return t._id===e.match.params.problemId})))}))}},{key:"componentWillUnmount",value:function(){window.UiAutosave&&(clearTimeout(window.UiAutosave),window.UiAutosave=void 0)}},{key:"render",value:function(){var e=this.props,t=e.currentAssignment,n=e.currentProblem,s=e.currentAnswersIsDirty;return y.default.createElement("div",{className:"app-module relative full-size assignments"},y.default.createElement(D.default,{match:this.props.match}),y.default.createElement(R.Switch,null,y.default.createElement(R.Route,{path:"/assignments",exact:!0},y.default.createElement("main",{className:"disp-flex assignments__main"},y.default.createElement("h1",{className:"text-align-center"},"Select an assignment to complete."))),y.default.createElement(R.Route,{path:"/assignments/change-pwd",exact:!0},y.default.createElement("main",{className:"disp-flex assignments__main"},y.default.createElement(G.default,null))),y.default.createElement(R.Route,{path:"/assignments/:assignmentId",exact:!0},y.default.createElement("main",{className:"disp-flex assignments__main"},y.default.createElement("div",{className:"assignments__tags-wrapper"},y.default.createElement(x.ProblemTagsContainer,{tags:t?t.problems:[],numEachRow:10,assignmentId:this.props.match.params.assignmentId,problemId:this.props.match.params.problemId})))),y.default.createElement(R.Route,{path:"/assignments/:assignmentId/:problemId",exact:!0},y.default.createElement("main",{className:"disp-flex assignments__main"},y.default.createElement("div",{className:"assignments__tags-wrapper"},y.default.createElement(x.ProblemTagsContainer,{tags:t?t.problems:[],numEachRow:10,assignmentId:this.props.match.params.assignmentId,problemId:this.props.match.params.problemId})),y.default.createElement("div",{className:"assignments__content-container"},y.default.createElement(b.default,{className:"app-markdown assignments__content",source:n?n.text:"",escapeHtml:!0,renderers:{CodeBlock:U.default,Code:U.default,Link:k.default}}),this.renderQuestionsAndAnswers(),y.default.createElement(R.Prompt,{when:s,message:function(){return"Are you sure you want to go to another page? Your current changes will not be saved."}})),y.default.createElement("div",{className:"assignments__op-btns-container"},y.default.createElement(a.default,{type:"primary",size:"large",onClick:this.onClickSaveBtn,disabled:!!t&&t.end_at<(new Date).getTime()||!s},"Save"),y.default.createElement("a",{href:"/submission-history/"+(t?t._id:"")+"/"+(n?n._id:""),target:"_blank",rel:"noopener noreferrer"},y.default.createElement(a.default,{className:"m-l-md",type:"primary",size:"large"},"View submission history")),y.default.createElement("div",{className:"float-right"},y.default.createElement("span",null,"This assignment will be closed at: "),y.default.createElement("span",null,t?(0,S.default)(t.end_at).format("YYYY-MM-DD HH:mm:ss"):""," UTC+8")))))))}}]),t}(y.default.Component);V.propTypes={dispatch:A.PropTypes.func.isRequired,match:A.PropTypes.object.isRequired,currentAssignment:A.PropTypes.instanceOf(P.default),currentProblem:A.PropTypes.instanceOf(M.default),currentAnswers:A.PropTypes.array,currentAnswersIsDirty:A.PropTypes.bool.isRequired},V.defaultProps={currentAssignment:null,currentProblem:null,currentAnswers:[]};var Q=function(e){return{currentAssignment:e.assignments.currentAssignment,currentProblem:e.assignments.currentProblem,currentAnswers:e.assignments.currentAnswers,currentAnswersIsDirty:e.assignments.currentAnswersIsDirty}},Y=function(e){return{dispatch:e}},W=(0,v.connect)(Q,Y)(V);t.default=W;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(V,"AssignmentsModule","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/index.jsx"),__REACT_HOT_LOADER__.register(Q,"mapStateToProps","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/index.jsx"),__REACT_HOT_LOADER__.register(Y,"mapDispatchesToProps","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/index.jsx"),__REACT_HOT_LOADER__.register(W,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/index.jsx"))}()},459:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments[1];return void 0!==t.actionId&&(0,l.default)(e.asyncActionIdsInObserve,t.actionId)===!1?e:(C[t.type||""]||function(e){return e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var a,o=n(10),u=s(o),i=n(105),l=s(i),d=n(131),c=s(d),f=n(132),p=s(f),_=n(842),m=s(_),E=n(843),T=s(E),g=n(48),h=s(g),A=n(104),y=s(A),v=n(141),R=s(v),O=n(115),b=s(O),L=n(171),S={asyncActionIdsInObserve:[],assignmentListIsLoading:!0,assignmentsList:[],currentAssignment:null,currentProblem:null,currentAnswers:[],currentAnswersIsDirty:!1},C=(a={},(0,u.default)(a,L.AT.FETCH_ASSIGNMENTS.pending,function(e){return(0,y.default)({},e,{assignmentListIsLoading:!0})}),(0,u.default)(a,L.AT.FETCH_ASSIGNMENTS.success,function(e,t){var n=t.payload;return(0,y.default)({},e,{assignmentListIsLoading:!1,assignmentList:(0,h.default)(n.data,function(e){return new R.default(e)})})}),(0,u.default)(a,L.AT.FETCH_ASSIGNMENT_DETAIL.success,function(e,t){var n=t.payload.data,s=(0,T.default)(function(e){return(0,h.default)(e,function(e){return e.answers})},m.default)(n.submissions);return(0,y.default)({},e,{currentAssignment:new R.default(n,s)})}),(0,u.default)(a,L.AT.SET_CURRENT_PROBLEM,function(e,t){if(!t.payload)return(0,y.default)({},e,{currentProblem:null,currentAnswers:[]});var n=[];if(e.currentAssignment.submissions){var s=(0,T.default)(function(e){return(0,h.default)(e,function(e){return e.answers})},m.default)(e.currentAssignment.submissions);n=(0,h.default)(t.payload.questions,function(e){var t=(0,p.default)(s,function(t){return t.question_id===e._id});return t?{question_id:t.question_id,text:t.text}:{question_id:e._id,text:""}})}else n=(0,h.default)(t.payload.questions,function(e){return{question_id:e._id,text:""}});return window.onbeforeunload=void 0,(0,y.default)({},e,{currentProblem:new b.default(t.payload),currentAnswers:n,currentAnswersIsDirty:!1})}),(0,u.default)(a,L.AT.CHANGE_ANSWER_VALUE,function(e,t){var n=t.payload,s=n.answerIdx,r=n.newValue,a=(0,c.default)(e.currentAnswers);return a[s].text=r,window.onbeforeunload=function(e){var t="Are you sure you want to close this page? Your current changes will not be saved.",n=e||window.event;return n&&(n.returnValue=t),t},(0,y.default)({},e,{currentAnswers:a,currentAnswersIsDirty:!0})}),(0,u.default)(a,L.AT.SUBMIT_ANSWERS.success,function(e){return window.onbeforeunload=void 0,window.UiAutosave&&(clearTimeout(window.UiAutosave),window.UiAutosave=void 0),(0,y.default)({},e,{currentAnswersIsDirty:!1})}),a),P=r;t.default=P;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(r,"reducerFn","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/reducer/index.js"),__REACT_HOT_LOADER__.register(S,"initState","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/reducer/index.js"),__REACT_HOT_LOADER__.register(C,"handleDispatches","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/reducer/index.js"),__REACT_HOT_LOADER__.register(P,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/reducer/index.js"))}()},460:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=(n(57),n(75)),a=s(r),o=n(3),u=s(o),i=n(23),l=s(i),d=n(2),c=s(d),f=n(17),p=s(f),_=n(6),m=s(_),E=n(5),T=s(E),g=n(1),h=s(g),A=n(8),y=s(A),v=function(e){function t(e){(0,c.default)(this,t);var n=(0,m.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return n.onChange=function(e){return void 0!==n.props.onChange?n.props.onChange(e):n.setState((0,u.default)({},n.state,{value:e.target.value}))},n.state={value:""},n}return(0,T.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){var e=void 0===this.props.value?this.state.value:this.props.value,t=(0,y.default)("answers-text-area",this.props.className);return h.default.createElement("div",{className:t},h.default.createElement(a.default,{id:"ans-id-"+this.props.label,type:"textarea",rows:this.props.rows,value:e,onChange:this.onChange,disabled:this.props.disabled||!1}))}}]),t}(h.default.PureComponent);v.propTypes={value:g.PropTypes.string,onChange:g.PropTypes.func,rows:g.PropTypes.number,label:g.PropTypes.number.isRequired,className:g.PropTypes.string,disabled:g.PropTypes.bool},v.defaultProps={value:void 0,onChange:void 0,rows:8,className:"",disabled:!1};var R=v;t.default=R;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(v,"AnswersTextArea","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/submodule/answers-text-area/index.jsx"),__REACT_HOT_LOADER__.register(R,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/submodule/answers-text-area/index.jsx"))}()},461:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(23),a=s(r),o=n(2),u=s(o),i=n(17),l=s(i),d=n(6),c=s(d),f=n(5),p=s(f),_=(n(422),n(421)),m=s(_),E=n(48),T=s(E),g=n(1),h=s(g),A=n(32),y=n(42),v=n(141),R=s(v),O=n(76),b=s(O),L=m.default.SubMenu,S=m.default.Item,C=function(e){function t(e){(0,u.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.renderAssignmentMenuItems=function(){var e=n.props.assignmentList;return(0,T.default)(e,function(e){return h.default.createElement(S,{key:e._id},h.default.createElement(y.Link,{to:"/assignments/"+e._id,key:e._id},e.name))})},n.state={},n}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this;return h.default.createElement("aside",{className:"assignments-aside"},h.default.createElement(m.default,{defaultSelectedKeys:["a1"],defaultOpenKeys:["assignments"],theme:"dark",mode:"inline",selectedKeys:[this.props.currentAssignment?this.props.currentAssignment._id:""],onSelect:function(t){"logout"===t.key&&e.props.dispatch(b.default.logoutAsync())}},h.default.createElement(L,{key:"assignments",title:h.default.createElement("span",null,"Assignments")},this.renderAssignmentMenuItems()),h.default.createElement(S,{key:"changePwd"},h.default.createElement(y.Link,{to:"/assignments/change-pwd"},"Change password")),h.default.createElement(S,{key:"logout"},"Logout")))}}]),t}(h.default.Component);C.propTypes={dispatch:g.PropTypes.func.isRequired,assignmentList:g.PropTypes.arrayOf(g.PropTypes.instanceOf(R.default)),currentAssignment:g.PropTypes.instanceOf(R.default)},C.defaultProps={assignmentList:[],currentAssignment:null};var P=function(e){return{assignmentList:e.assignments.assignmentList,currentAssignment:e.assignments.currentAssignment}},j=function(e){return{dispatch:e}},M=(0,A.connect)(P,j)(C);t.default=M;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(L,"SubMenu","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/submodule/aside.jsx"),__REACT_HOT_LOADER__.register(S,"MenuItem","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/submodule/aside.jsx"),__REACT_HOT_LOADER__.register(C,"AssignmentsAside","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/submodule/aside.jsx"),__REACT_HOT_LOADER__.register(P,"mapStateToProps","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/submodule/aside.jsx"),__REACT_HOT_LOADER__.register(j,"mapDispatchesToProps","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/submodule/aside.jsx"),__REACT_HOT_LOADER__.register(M,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/submodule/aside.jsx"))}()},462:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=(n(74),n(73)),a=s(r),o=(n(57),n(75)),u=s(o),i=(n(114),n(113)),l=s(i),d=n(3),c=s(d),f=n(23),p=s(f),_=n(2),m=s(_),E=n(17),T=s(E),g=n(6),h=s(g),A=n(5),y=s(A),v=n(1),R=s(v),O=n(32),b=n(171),L=s(b),S=function(e){function t(e){(0,m.default)(this,t);var n=(0,h.default)(this,(t.__proto__||(0,p.default)(t)).call(this,e));return n.onChangePwd=function(e){var t=e.target.value;return n.setState((0,c.default)({},n.state,{newPwdValue:t}))},n.onChangeRepeatPwd=function(e){var t=e.target.value;return n.setState((0,c.default)({},n.state,{newPwdRepeatValue:t}))},n.onClickChangePwdBtn=function(){return n.state.newPwdValue!==n.state.newPwdRepeatValue?l.default.error("Repeat password do not match."):n.props.dispatch(L.default.changePwdAsync(n.state.newPwdValue))},n.state={newPwdValue:"",newPwdRepeatValue:""},n}return(0,y.default)(t,e),(0,T.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return R.default.createElement("div",{className:"assignments-change-pwd"},R.default.createElement("h1",{className:"text-align-center"},"Change password"),R.default.createElement("div",{className:"m-t-md assignments-change-pwd__input-wrapper"},R.default.createElement("div",null,R.default.createElement("label",{htmlFor:"new-pwd"},"Your new password:"),R.default.createElement(u.default,{id:"new-pwd",type:"password",value:this.state.newPwdValue,onChange:this.onChangePwd})),R.default.createElement("div",null,R.default.createElement("label",{htmlFor:"new-pwd-repeat"},"Repeat your new password:"),R.default.createElement(u.default,{id:"new-pwd-repeat",type:"password",value:this.state.newPwdRepeatValue,onChange:this.onChangeRepeatPwd})),R.default.createElement("div",{className:"m-t-md"},R.default.createElement(a.default,{type:"primary",onClick:this.onClickChangePwdBtn},"Change password"))))}}]),t}(R.default.Component);S.propTypes={dispatch:v.PropTypes.func.isRequired},S.defaultProps={},S.mapStateToProps=function(){return{}},S.mapDispatchesToProps=function(e){return{dispatch:e}};var C=(0,O.connect)(S.mapStateToProps,S.mapDispatchesToProps)(S);t.default=C;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(S,"ChangePassword","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/submodule/change-password.jsx"),__REACT_HOT_LOADER__.register(C,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/submodule/change-password.jsx"))}()},463:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ProblemTagsContainer=t.ProblemTag=void 0;var r=n(261),a=s(r),o=n(464),u=s(o),i=t.ProblemTag=a.default,l=t.ProblemTagsContainer=u.default,d={ProblemTag:i,ProblemTagsContainer:l};t.default=d;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(i,"ProblemTag","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/submodule/problem-tag/index.js"),__REACT_HOT_LOADER__.register(l,"ProblemTagsContainer","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/submodule/problem-tag/index.js"),__REACT_HOT_LOADER__.register(d,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/submodule/problem-tag/index.js"))}()},464:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(23),a=s(r),o=n(2),u=s(o),i=n(17),l=s(i),d=n(6),c=s(d),f=n(5),p=s(f),_=n(837),m=s(_),E=n(48),T=s(E),g=n(131),h=s(g),A=n(839),y=s(A),v=n(1),R=s(v),O=n(42),b=n(115),L=s(b),S=n(261),C=s(S),P=function(e){function t(e){(0,u.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.renderTags=function(e,t){for(var s=Math.ceil(e.length/t),r=(0,y.default)((0,h.default)(e),function(e){return e.visible});r.length<s*t;)r.push(new L.default({type:"null"}));var a=(0,T.default)(r,function(e,t){if("null"===e.type)return R.default.createElement(C.default,{key:t+"-null",type:"null"});var s=e.type;return n.props.problemId&&n.props.problemId===e._id&&(s="current"),R.default.createElement(C.default,{key:t+"-"+e._id,type:s},R.default.createElement(O.Link,{to:"/assignments/"+n.props.assignmentId+"/"+e._id},"P"+(t+1)))}),o=(0,m.default)(a,t);return(0,T.default)(o,function(e,t){var n="question-tag-row-"+t;return R.default.createElement("div",{className:"disp-table-row assignments-question-tags-container__row",key:n},e)})},n.state={},n}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return R.default.createElement("div",{className:"assignments-question-tags-container"},this.renderTags(this.props.tags,this.props.numEachRow))}}]),t}(R.default.Component);P.propTypes={tags:v.PropTypes.arrayOf(v.PropTypes.instanceOf(L.default)),numEachRow:v.PropTypes.number,assignmentId:v.PropTypes.string,problemId:v.PropTypes.string},P.defaultProps={tags:[],numEachRow:10,assignmentId:"",problemId:""};var j=P;t.default=j;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(P,"QuestionTagsContainer","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/submodule/problem-tag/problems-tags-container.jsx"),__REACT_HOT_LOADER__.register(j,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/submodule/problem-tag/problems-tags-container.jsx"))}()},465:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){return"auth/"+e},r=function(e){return{pending:s(e+"_PENDING"),success:s(e+"_SUCCESS"),failed:s(e+"_FAILED")}},a={USER_STATUS:r("USER_STATUS"),LOGOUT:r("LOGOUT")};t.default=a;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(s,"wrapByNamespace","/Users/joshoy/repo/TJLMS-FE/src/modules/auth/actions/types.js"),__REACT_HOT_LOADER__.register(r,"createAsyncActions","/Users/joshoy/repo/TJLMS-FE/src/modules/auth/actions/types.js"),__REACT_HOT_LOADER__.register(a,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/auth/actions/types.js"))}()},466:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(56),a=s(r),o=n(55),u=s(o),i=n(23),l=s(i),d=n(2),c=s(d),f=n(17),p=s(f),_=n(6),m=s(_),E=n(5),T=s(E),g=n(1),h=s(g),A=n(32),y=n(42),v=n(76),R=s(v),O=n(468),b=s(O),L=function(e){function t(e){(0,c.default)(this,t);var n=(0,m.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return n.state={},n}return(0,T.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){var e=this;return this.props.userStatus?null:function(){var t=(0,u.default)(a.default.mark(function t(n){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.fetchUserStatus();case 2:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}()(this)}},{key:"render",value:function(){var e=this.props,t=e.loginCode,n=e.userStatus;if(t&&401===t)return h.default.createElement(y.Redirect,{to:"/login"});if(t&&200===t)switch(n.role){case"student":return n.first?h.default.createElement(y.Redirect,{to:"/assignments/change-pwd"}):h.default.createElement(y.Redirect,{to:"/assignments"});case"admin":case"ta":return h.default.createElement(y.Redirect,{to:"/admin"});default:return h.default.createElement(y.Redirect,{to:"/login"})}return h.default.createElement("div",{className:"app-module auth"},h.default.createElement("h1",{className:"text-align-center p-t-lg"},"Loading..."))}}]),t}(h.default.Component);L.propTypes={loginCode:g.PropTypes.number.isRequired,userStatus:g.PropTypes.shape({realname:g.PropTypes.string,role:g.PropTypes.string,student_number:g.PropTypes.oneOfType([g.PropTypes.number,g.PropTypes.string]),username:g.PropTypes.string})},L.defaultProps={userStatus:null},L.Validation=b.default;var S=function(e){var t=e.auth;return{loginCode:t.loginCode,userStatus:t.userStatus}},C=function(e){return{dispatch:e,fetchUserStatus:function(){var t=(0,u.default)(a.default.mark(function t(){return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,R.default.fetchUserStatusAsync(e)();case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}},t,void 0)}));return function(){return t.apply(this,arguments)}}()}},P=(0,A.connect)(S,C)(L);t.default=P;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(L,"LoginModule","/Users/joshoy/repo/TJLMS-FE/src/modules/auth/index.jsx"),__REACT_HOT_LOADER__.register(S,"mapStateToProps","/Users/joshoy/repo/TJLMS-FE/src/modules/auth/index.jsx"),__REACT_HOT_LOADER__.register(C,"mapDispatchesToProps","/Users/joshoy/repo/TJLMS-FE/src/modules/auth/index.jsx"),__REACT_HOT_LOADER__.register(P,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/auth/index.jsx"))}()},467:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments[1];return void 0!==t.actionId&&(0,l.default)(e.asyncActionIdsInObserve,t.actionId)===!1?e:(_[t.type||""]||function(e){return e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var a,o=n(10),u=s(o),i=n(105),l=s(i),d=n(104),c=s(d),f=n(76),p={asyncActionIdsInObserve:[],isLogin:!1,loginCode:0,userStatus:null},_=(a={},(0,u.default)(a,f.AT.USER_STATUS.success,function(e,t){return 200===t.payload.code?(0,c.default)({},e,{isLogin:!0,loginCode:200,userStatus:t.payload.data}):(0,c.default)({},e,{isLogin:!1,loginCode:t.payload.code,userStatus:null})}),(0,u.default)(a,f.AT.LOGOUT.success,function(e){return(0,c.default)({},e,{isLogin:!1,loginCode:401,userStatus:null})}),a),m=r;t.default=m;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(r,"reducerFn","/Users/joshoy/repo/TJLMS-FE/src/modules/auth/reducer/index.js"),__REACT_HOT_LOADER__.register(p,"initState","/Users/joshoy/repo/TJLMS-FE/src/modules/auth/reducer/index.js"),__REACT_HOT_LOADER__.register(_,"handleDispatches","/Users/joshoy/repo/TJLMS-FE/src/modules/auth/reducer/index.js"),__REACT_HOT_LOADER__.register(m,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/auth/reducer/index.js"))}()},468:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(56),a=s(r),o=n(55),u=s(o),i=n(23),l=s(i),d=n(2),c=s(d),f=n(17),p=s(f),_=n(6),m=s(_),E=n(5),T=s(E),g=n(105),h=s(g),A=n(1),y=s(A),v=n(32),R=n(42),O=n(76),b=s(O),L=function(e){function t(e){(0,c.default)(this,t);var n=(0,m.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return n.state={},n}return(0,T.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){var e=this;return this.props.userStatus?null:function(){var t=(0,u.default)(a.default.mark(function t(n){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.fetchUserStatus();case 2:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}()(this)}},{key:"render",value:function(){var e=this.props,t=e.loginCode,n=e.userStatus;return t&&401===t?y.default.createElement(R.Redirect,{to:"/login"}):t&&200===t?(0,h.default)(this.props.allowedRoles,n.role)?this.props.children:y.default.createElement(R.Redirect,{to:"/"}):y.default.createElement("div",null,y.default.createElement("h1",{className:"text-align-center"},"Loading..."))}}]),t}(y.default.Component);L.propTypes={children:A.PropTypes.node.isRequired,allowedRoles:A.PropTypes.arrayOf(A.PropTypes.string),loginCode:A.PropTypes.number,userStatus:A.PropTypes.shape({realname:A.PropTypes.string,role:A.PropTypes.string,student_number:A.PropTypes.oneOfType([A.PropTypes.number,A.PropTypes.string]),username:A.PropTypes.string})},L.defaultProps={loginCode:0,allowedRoles:[],userStatus:null};var S=function(e){var t=e.auth;return{loginCode:t.loginCode,userStatus:t.userStatus}},C=function(e){return{dispatch:e,fetchUserStatus:function(){var t=(0,u.default)(a.default.mark(function t(){return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,b.default.fetchUserStatusAsync(e)();case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}},t,void 0)}));return function(){return t.apply(this,arguments)}}()}},P=(0,v.connect)(S,C)(L);t.default=P;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(L,"Validation","/Users/joshoy/repo/TJLMS-FE/src/modules/auth/validation.jsx"),__REACT_HOT_LOADER__.register(S,"mapStateToProps","/Users/joshoy/repo/TJLMS-FE/src/modules/auth/validation.jsx"),__REACT_HOT_LOADER__.register(C,"mapDispatchesToProps","/Users/joshoy/repo/TJLMS-FE/src/modules/auth/validation.jsx"),__REACT_HOT_LOADER__.register(P,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/auth/validation.jsx"))}()},469:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){return"login/"+e},r=function(e){return{pending:s(e+"_PENDING"),success:s(e+"_SUCCESS"),failed:s(e+"_FAILED")}},a={LOGIN:r("LOGIN")};t.default=a;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(s,"wrapByNamespace","/Users/joshoy/repo/TJLMS-FE/src/modules/login/actions/types.js"),__REACT_HOT_LOADER__.register(r,"createAsyncActions","/Users/joshoy/repo/TJLMS-FE/src/modules/login/actions/types.js"),__REACT_HOT_LOADER__.register(a,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/login/actions/types.js"))}()},470:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(56),a=s(r),o=n(55),u=s(o),i=n(23),l=s(i),d=n(2),c=s(d),f=n(17),p=s(f),_=n(6),m=s(_),E=n(5),T=s(E),g=n(1),h=s(g),A=n(32),y=n(42);n(743);var v=n(472),R=s(v),O=n(76),b=s(O),L=function(e){function t(e){(0,c.default)(this,t);var n=(0,m.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return n.state={},n}return(0,T.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){var e=this;return this.props.userStatus?null:function(){var t=(0,u.default)(a.default.mark(function t(n){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.fetchUserStatus();case 2:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}()(this)}},{key:"render",value:function(){return this.props.userStatus?h.default.createElement(y.Redirect,{to:"/auth"}):h.default.createElement("div",{className:"app-module login"},h.default.createElement("div",{className:"login__form-container"},h.default.createElement("h1",null,"TJLMS - 登录"),h.default.createElement(R.default,null)))}}]),t}(h.default.Component);L.propTypes={userStatus:g.PropTypes.object},L.defaultProps={userStatus:null};var S=function(e){return{userStatus:e.auth.userStatus}},C=function(e){return{dispatch:e,fetchUserStatus:function(){var t=(0,u.default)(a.default.mark(function t(){return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,b.default.fetchUserStatusAsync(e)();case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}},t,void 0)}));return function(){return t.apply(this,arguments)}}()}},P=(0,A.connect)(S,C)(L);t.default=P;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(L,"LoginModule","/Users/joshoy/repo/TJLMS-FE/src/modules/login/index.jsx"),__REACT_HOT_LOADER__.register(S,"mapStateToProps","/Users/joshoy/repo/TJLMS-FE/src/modules/login/index.jsx"),__REACT_HOT_LOADER__.register(C,"mapDispatchesToProps","/Users/joshoy/repo/TJLMS-FE/src/modules/login/index.jsx"),__REACT_HOT_LOADER__.register(P,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/login/index.jsx"))}()},471:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments[1];return void 0!==t.actionId&&(0,l.default)(e.asyncActionIdsInObserve,t.actionId)===!1?e:(_[t.type||""]||function(e){return e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var a,o=n(10),u=s(o),i=n(105),l=s(i),d=n(104),c=s(d),f=n(262),p={asyncActionIdsInObserve:[],latestLoginActionId:null},_=(a={},(0,u.default)(a,f.AT.LOGIN.pending,function(e,t){return(0,c.default)({},e,{latestLoginActionId:t.payload})}),(0,u.default)(a,f.AT.LOGIN.success,function(e,t){return t.payload.actionId!==e.latestLoginActionId?e:(0,c.default)({},e,{latestLoginActionId:null})}),a),m=r;t.default=m;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(r,"reducerFn","/Users/joshoy/repo/TJLMS-FE/src/modules/login/reducer/index.js"),__REACT_HOT_LOADER__.register(p,"initState","/Users/joshoy/repo/TJLMS-FE/src/modules/login/reducer/index.js"),__REACT_HOT_LOADER__.register(_,"handleDispatches","/Users/joshoy/repo/TJLMS-FE/src/modules/login/reducer/index.js"),__REACT_HOT_LOADER__.register(m,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/login/reducer/index.js"))}()},472:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=(n(74),n(73)),a=s(r),o=(n(57),n(75)),u=s(o),i=(n(169),n(68)),l=s(i),d=n(23),c=s(d),f=n(2),p=s(f),_=n(17),m=s(_),E=n(6),T=s(E),g=n(5),h=s(g),A=(n(414),n(413)),y=s(A),v=n(1),R=s(v),O=n(32),b=n(262),L=s(b),S=y.default.Item,C=function(e){function t(e){(0,p.default)(this,t);var n=(0,T.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return n.handleSubmit=function(e){e.preventDefault(),n.props.form.validateFields(function(e,t){e||n.props.dispatch(L.default.login(t))})},n.state={},n}return(0,h.default)(t,e),(0,m.default)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return R.default.createElement(y.default,{className:"login__form",onSubmit:this.handleSubmit},R.default.createElement(S,null,e("username",t.rules.username)(R.default.createElement(u.default,{size:"large",placeholder:"Your student ID",type:"text",className:"login__form__username",prefix:R.default.createElement(l.default,{type:"user"})}))),R.default.createElement(S,null,e("password",t.rules.password)(R.default.createElement(u.default,{size:"large",placeholder:"Your password",type:"password",className:"login__form__pwd",prefix:R.default.createElement(l.default,{type:"lock"})}))),R.default.createElement(S,{className:"m-t-lg"},R.default.createElement(a.default,{size:"large",type:"primary",htmlType:"submit",className:"login__form__submit-btn"},"登录")))}}]),t}(R.default.Component);C.propTypes={form:v.PropTypes.object.isRequired,dispatch:v.PropTypes.func},C.defaultProps={dispatch:function(){}},C.rules={username:{rules:[{required:!0,message:"Please input your student ID."}]},password:{rules:[{required:!0,message:"Please input your password."}]}};var P=function(e){return{userStatus:e.auth.userStatus}},j=function(e){return{dispatch:e}},M=(0,O.connect)(P,j)(y.default.create()(C));t.default=M;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(S,"FormItem","/Users/joshoy/repo/TJLMS-FE/src/modules/login/submodules/login-form.jsx"),__REACT_HOT_LOADER__.register(C,"LoginForm","/Users/joshoy/repo/TJLMS-FE/src/modules/login/submodules/login-form.jsx"),__REACT_HOT_LOADER__.register(P,"mapStateToProps","/Users/joshoy/repo/TJLMS-FE/src/modules/login/submodules/login-form.jsx"),__REACT_HOT_LOADER__.register(j,"mapDispatchesToProps","/Users/joshoy/repo/TJLMS-FE/src/modules/login/submodules/login-form.jsx"),__REACT_HOT_LOADER__.register(M,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/login/submodules/login-form.jsx"))}()},473:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(23),a=s(r),o=n(2),u=s(o),i=n(17),l=s(i),d=n(6),c=s(d),f=n(5),p=s(f),_=n(1),m=s(_),E=function(e){function t(e){(0,u.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.state={},n}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return m.default.createElement("div",{className:"page-not-found-module"},"Page not found")}}]),t}(m.default.Component);E.propTypes={};var T=E;t.default=T;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(E,"PageNotFoundModule","/Users/joshoy/repo/TJLMS-FE/src/modules/not-found/index.jsx"),__REACT_HOT_LOADER__.register(T,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/not-found/index.jsx"))}()},474:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(249),a=n(382),o=n(467),u=s(o),i=n(471),l=s(i),d=n(453),c=s(d),f=n(459),p=s(f),_=n(477),m=s(_),E=(0,r.combineReducers)({routing:a.routerReducer,auth:u.default,login:l.default,admin:c.default,assignments:p.default,submissionHistory:m.default}),T=E;t.default=T;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(E,"RootReducer","/Users/joshoy/repo/TJLMS-FE/src/modules/reducer.js"),__REACT_HOT_LOADER__.register(T,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/reducer.js"))}()},475:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){return"submissionHistory/"+e},r=function(e){return{pending:s(e+"_PENDING"),success:s(e+"_SUCCESS"),failed:s(e+"_FAILED")}},a={FETCH_PROBLEM_HISTORY_LIST:r("FETCH_PROBLEM_HISTORY_LIST"),FETCH_PROBLEM_HISTORY_DETAIL:r("FETCH_PROBLEM_HISTORY_DETAIL"),CLEAR_PROBLEM_HISTORY:s("CLEAR_PROBLEM_HISTORY")};t.default=a;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(s,"wrapByNamespace","/Users/joshoy/repo/TJLMS-FE/src/modules/submission-history/actions/types.js"),__REACT_HOT_LOADER__.register(r,"createAsyncActions","/Users/joshoy/repo/TJLMS-FE/src/modules/submission-history/actions/types.js"),__REACT_HOT_LOADER__.register(a,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/submission-history/actions/types.js"))}()},476:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(23),a=s(r),o=n(2),u=s(o),i=n(17),l=s(i),d=n(6),c=s(d),f=n(5),p=s(f),_=n(48),m=s(_),E=n(1),T=s(E),g=n(32),h=n(42),A=n(27),y=s(A);n(744);var v=n(263),R=s(v),O=function(e){function t(e){(0,u.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.componentWillReceiveProps=function(e){var t=e.match,s=e.dispatch,r=t.params.historyId;n.props.match.params.historyId!==r&&s(R.default.fetchProblemHistoryDetail(r))},n.renderDetail=function(){var e=n.props.currentHistoryDetails;if(!e)return[];var t=(0,m.default)(e.answers,function(e,t){return T.default.createElement("li",{key:""+e._id},T.default.createElement("h3",null,"Answer ",t+1),T.default.createElement("p",null,e.text))});return T.default.createElement("div",null,T.default.createElement("h2",null,T.default.createElement("span",null,"Submission details for record @"),T.default.createElement("span",null,(0,y.default)(e.submit_at).format("YYYY-MM-DD HH:mm:ss")," (UTC+8)")),T.default.createElement("ul",null,t))},n.state={},n}return(0,p.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match,n=e.dispatch,s=t.params.assignmentId,r=t.params.problemId;n(R.default.fetchProblemHistoryList(s,r));var a=t.params.historyId;a&&n(R.default.fetchProblemHistoryDetail(a))}},{key:"renderList",value:function(){var e=this.props.match,t=e.params.assignmentId,n=e.params.problemId,s=(0,m.default)(this.props.currentProblemHistoryList,function(e){return T.default.createElement("li",{key:""+e._id},T.default.createElement(h.Link,{to:"/submission-history/"+t+"/"+n+"/"+e._id},"Record @ ",(0,y.default)(e.submit_at).format("YYYY-MM-DD HH:mm:ss")," (UTC+8)"))});return T.default.createElement("ol",null,s)}},{key:"render",value:function(){return T.default.createElement("div",{className:"submission-history"},T.default.createElement("div",{className:"left-wrapper"},T.default.createElement("div",{className:"p-l-md p-r-md p-t-md p-b-md"},T.default.createElement("h1",null,"Submission History"),this.renderList())),T.default.createElement("div",{className:"right-wrapper"},T.default.createElement("div",{className:"p-l-md p-r-md p-t-md p-b-md"},this.renderDetail())))}}]),t}(T.default.Component);O.propTypes={dispatch:E.PropTypes.func.isRequired,match:E.PropTypes.object.isRequired,currentProblemHistoryList:E.PropTypes.array.isRequired,currentHistoryDetails:E.PropTypes.object},O.defaultProps={currentHistoryDetails:null},O.mapStateToProps=function(e){var t=e.submissionHistory;return{currentProblemHistoryList:t.currentProblemHistoryList,currentHistoryDetails:t.currentHistoryDetails}},O.mapDispatchesToProps=function(e){return{dispatch:e}};var b=(0,g.connect)(O.mapStateToProps,O.mapDispatchesToProps)(O);t.default=b;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(O,"SubmissionHistroy","/Users/joshoy/repo/TJLMS-FE/src/modules/submission-history/index.jsx"),__REACT_HOT_LOADER__.register(b,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/submission-history/index.jsx"))}()},477:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments[1];return void 0!==t.actionId&&(0,l.default)(e.asyncActionIdsInObserve,t.actionId)===!1?e:(_[t.type||""]||function(e){return e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var a,o=n(10),u=s(o),i=n(105),l=s(i),d=n(104),c=s(d),f=n(263),p={currentProblemHistoryList:[],currentHistoryDetails:null},_=(a={},(0,u.default)(a,f.AT.FETCH_PROBLEM_HISTORY_LIST.success,function(e,t){var n=t.payload;return(0,c.default)({},e,{currentProblemHistoryList:n})}),(0,u.default)(a,f.AT.FETCH_PROBLEM_HISTORY_DETAIL.success,function(e,t){var n=t.payload;return(0,c.default)({},e,{currentHistoryDetails:n})}),(0,u.default)(a,f.AT.CLEAR_PROBLEM_HISTORY,function(e){return(0,c.default)({},e,{currentProblemHistoryList:[],currentHistoryDetails:null})}),a),m=r;t.default=m;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(r,"reducerFn","/Users/joshoy/repo/TJLMS-FE/src/modules/submission-history/reducer/index.js"),__REACT_HOT_LOADER__.register(p,"initState","/Users/joshoy/repo/TJLMS-FE/src/modules/submission-history/reducer/index.js"),__REACT_HOT_LOADER__.register(_,"handleDispatches","/Users/joshoy/repo/TJLMS-FE/src/modules/submission-history/reducer/index.js"),__REACT_HOT_LOADER__.register(m,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/submission-history/reducer/index.js"))}()},741:function(e,t){},742:function(e,t){},743:function(e,t){},744:function(e,t){},76:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AT=void 0;var r=n(56),a=s(r),o=n(55),u=s(o),i=n(2),l=s(i),d=n(117),c=s(d),f=n(465),p=s(f),_=t.AT=p.default,m=function e(){(0,l.default)(this,e)};m.fetchUserStatusAsync=function(e){return(0,u.default)(a.default.mark(function t(){var n;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:_.USER_STATUS.pending}),t.prev=1,t.next=4,c.default.tokenGet("/api/user/status");case 4:return n=t.sent,t.abrupt("return",{type:_.USER_STATUS.success,payload:n});case 8:return t.prev=8,t.t0=t.catch(1),console.error(t.t0),t.abrupt("return",{type:_.USER_STATUS.failed});case 12:case"end":return t.stop()}},t,void 0,[[1,8]])}))},m.logoutAsync=function(){return function(e){return function(){var t=(0,u.default)(a.default.mark(function t(){var n;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:_.LOGOUT.pending}),t.prev=1,t.next=4,c.default.tokenGet("/api/user/logout");case 4:if(n=t.sent,200!==n.code){t.next=7;break}return t.abrupt("return",e({type:_.LOGOUT.success,payload:n}));case 7:throw new Error(n.reason);case 10:return t.prev=10,t.t0=t.catch(1),console.error(t.t0),t.abrupt("return",{type:_.LOGOUT.failed});case 14:case"end":return t.stop()}},t,void 0,[[1,10]])}));return function(){return t.apply(this,arguments)}}()()}};var E=m;t.default=E;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(_,"AT","/Users/joshoy/repo/TJLMS-FE/src/modules/auth/actions/index.js"),__REACT_HOT_LOADER__.register(m,"Actions","/Users/joshoy/repo/TJLMS-FE/src/modules/auth/actions/index.js"),__REACT_HOT_LOADER__.register(E,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/auth/actions/index.js"))}()}},[450]);